(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{4160:(e,a,s)=>{Promise.resolve().then(s.bind(s,6172))},6172:(e,a,s)=>{"use strict";s.d(a,{RotacionDeportiva:()=>ey});var t=s(5155),l=s(2115),r=s(4253),i=s(2085),n=s(9434);let o=(0,i.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=l.forwardRef((e,a)=>{let{className:s,variant:l,size:i,asChild:d=!1,...c}=e,m=d?r.DX:"button";return(0,t.jsx)(m,{className:(0,n.cn)(o({variant:l,size:i,className:s})),ref:a,...c})});d.displayName="Button";let c=l.forwardRef((e,a)=>{let{className:s,...l}=e;return(0,t.jsx)("div",{ref:a,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",s),...l})});c.displayName="Card";let m=l.forwardRef((e,a)=>{let{className:s,...l}=e;return(0,t.jsx)("div",{ref:a,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",s),...l})});m.displayName="CardHeader";let p=l.forwardRef((e,a)=>{let{className:s,...l}=e;return(0,t.jsx)("div",{ref:a,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",s),...l})});p.displayName="CardTitle";let u=l.forwardRef((e,a)=>{let{className:s,...l}=e;return(0,t.jsx)("div",{ref:a,className:(0,n.cn)("text-sm text-muted-foreground",s),...l})});u.displayName="CardDescription";let x=l.forwardRef((e,a)=>{let{className:s,...l}=e;return(0,t.jsx)("div",{ref:a,className:(0,n.cn)("p-6 pt-0",s),...l})});x.displayName="CardContent",l.forwardRef((e,a)=>{let{className:s,...l}=e;return(0,t.jsx)("div",{ref:a,className:(0,n.cn)("flex items-center p-6 pt-0",s),...l})}).displayName="CardFooter";let f=l.forwardRef((e,a)=>{let{className:s,type:l,...r}=e;return(0,t.jsx)("input",{type:l,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:a,...r})});f.displayName="Input";var h=s(968);let g=(0,i.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),N=l.forwardRef((e,a)=>{let{className:s,...l}=e;return(0,t.jsx)(h.b,{ref:a,className:(0,n.cn)(g(),s),...l})});N.displayName=h.b.displayName;var y=s(8611);let j=l.forwardRef((e,a)=>{let{className:s,...l}=e;return(0,t.jsx)(y.bL,{className:(0,n.cn)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",s),...l,ref:a,children:(0,t.jsx)(y.zi,{className:(0,n.cn)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})})});j.displayName=y.bL.displayName;var v=s(7489);let b=l.forwardRef((e,a)=>{let{className:s,orientation:l="horizontal",decorative:r=!0,...i}=e;return(0,t.jsx)(v.b,{ref:a,decorative:r,orientation:l,className:(0,n.cn)("shrink-0 bg-border","horizontal"===l?"h-[1px] w-full":"h-full w-[1px]",s),...i})});b.displayName=v.b.displayName;var w=s(7481),A=s(7381),E=s(9556),S=s(7223),C=s(1816),R=s(8046),k=s(286),I=s(5268),q=s(4913),T=s(1545),O=s(7554),D=s(5668),_=s(5318);let M=D.bL,L=D.l9,z=D.ZL;D.bm;let J=l.forwardRef((e,a)=>{let{className:s,...l}=e;return(0,t.jsx)(D.hJ,{ref:a,className:(0,n.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...l})});J.displayName=D.hJ.displayName;let B=l.forwardRef((e,a)=>{let{className:s,children:l,...r}=e;return(0,t.jsxs)(z,{children:[(0,t.jsx)(J,{}),(0,t.jsxs)(D.UC,{ref:a,className:(0,n.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...r,children:[l,(0,t.jsxs)(D.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,t.jsx)(_.A,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});B.displayName=D.UC.displayName;let P=e=>{let{className:a,...s}=e;return(0,t.jsx)("div",{className:(0,n.cn)("flex flex-col space-y-1.5 text-center sm:text-left",a),...s})};P.displayName="DialogHeader";let F=e=>{let{className:a,...s}=e;return(0,t.jsx)("div",{className:(0,n.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",a),...s})};F.displayName="DialogFooter";let V=l.forwardRef((e,a)=>{let{className:s,...l}=e;return(0,t.jsx)(D.hE,{ref:a,className:(0,n.cn)("text-lg font-semibold leading-none tracking-tight",s),...l})});V.displayName=D.hE.displayName;let W=l.forwardRef((e,a)=>{let{className:s,...l}=e;return(0,t.jsx)(D.VY,{ref:a,className:(0,n.cn)("text-sm text-muted-foreground",s),...l})});W.displayName=D.VY.displayName;var U=s(2278);let H=U.bL,Y=U.l9,G=U.ZL,Z=l.forwardRef((e,a)=>{let{className:s,...l}=e;return(0,t.jsx)(U.hJ,{className:(0,n.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...l,ref:a})});Z.displayName=U.hJ.displayName;let K=l.forwardRef((e,a)=>{let{className:s,...l}=e;return(0,t.jsxs)(G,{children:[(0,t.jsx)(Z,{}),(0,t.jsx)(U.UC,{ref:a,className:(0,n.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...l})]})});K.displayName=U.UC.displayName;let X=e=>{let{className:a,...s}=e;return(0,t.jsx)("div",{className:(0,n.cn)("flex flex-col space-y-2 text-center sm:text-left",a),...s})};X.displayName="AlertDialogHeader";let Q=e=>{let{className:a,...s}=e;return(0,t.jsx)("div",{className:(0,n.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",a),...s})};Q.displayName="AlertDialogFooter";let $=l.forwardRef((e,a)=>{let{className:s,...l}=e;return(0,t.jsx)(U.hE,{ref:a,className:(0,n.cn)("text-lg font-semibold",s),...l})});$.displayName=U.hE.displayName;let ee=l.forwardRef((e,a)=>{let{className:s,...l}=e;return(0,t.jsx)(U.VY,{ref:a,className:(0,n.cn)("text-sm text-muted-foreground",s),...l})});ee.displayName=U.VY.displayName;let ea=l.forwardRef((e,a)=>{let{className:s,...l}=e;return(0,t.jsx)(U.rc,{ref:a,className:(0,n.cn)(o(),s),...l})});ea.displayName=U.rc.displayName;let es=l.forwardRef((e,a)=>{let{className:s,...l}=e;return(0,t.jsx)(U.ZD,{ref:a,className:(0,n.cn)(o({variant:"outline"}),"mt-2 sm:mt-0",s),...l})});es.displayName=U.ZD.displayName;var et=s(7250);let el=et.bL,er=l.forwardRef((e,a)=>{let{className:s,...l}=e;return(0,t.jsx)(et.q7,{ref:a,className:(0,n.cn)("border-b",s),...l})});er.displayName="AccordionItem";let ei=l.forwardRef((e,a)=>{let{className:s,children:l,...r}=e;return(0,t.jsx)(et.Y9,{className:"flex",children:(0,t.jsxs)(et.l9,{ref:a,className:(0,n.cn)("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",s),...r,children:[l,(0,t.jsx)(E.A,{className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})})});ei.displayName=et.l9.displayName;let en=l.forwardRef((e,a)=>{let{className:s,children:l,...r}=e;return(0,t.jsx)(et.UC,{ref:a,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...r,children:(0,t.jsx)("div",{className:(0,n.cn)("pb-4 pt-0",s),children:l})})});en.displayName=et.UC.displayName;var eo=s(64);let ed=eo.bL,ec=l.forwardRef((e,a)=>{let{className:s,...l}=e;return(0,t.jsx)(eo.B8,{ref:a,className:(0,n.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",s),...l})});ec.displayName=eo.B8.displayName;let em=l.forwardRef((e,a)=>{let{className:s,...l}=e;return(0,t.jsx)(eo.l9,{ref:a,className:(0,n.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",s),...l})});em.displayName=eo.l9.displayName;let ep=l.forwardRef((e,a)=>{let{className:s,...l}=e;return(0,t.jsx)(eo.UC,{ref:a,className:(0,n.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",s),...l})});ep.displayName=eo.UC.displayName;var eu=s(9051);let ex=l.forwardRef((e,a)=>{let{className:s,children:l,...r}=e;return(0,t.jsxs)(eu.bL,{ref:a,className:(0,n.cn)("relative overflow-hidden",s),...r,children:[(0,t.jsx)(eu.LM,{className:"h-full w-full rounded-[inherit]",children:l}),(0,t.jsx)(ef,{}),(0,t.jsx)(eu.OK,{})]})});ex.displayName=eu.bL.displayName;let ef=l.forwardRef((e,a)=>{let{className:s,orientation:l="vertical",...r}=e;return(0,t.jsx)(eu.VM,{ref:a,orientation:l,className:(0,n.cn)("flex touch-none select-none transition-colors","vertical"===l&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===l&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",s),...r,children:(0,t.jsx)(eu.lr,{className:"relative flex-1 rounded-full bg-border"})})});ef.displayName=eu.VM.displayName;let eh=e=>{let{player:a,onRemove:s,onAssign:l,showAssign:r,isChampion:i,turn:o,onMoveUp:c,onMoveDown:m,isFirst:p,isLast:u,isTeamAFull:x,isTeamBFull:f}=e;return(0,t.jsxs)("div",{className:(0,n.cn)("relative flex items-center justify-between p-3 rounded-lg shadow-sm transition-all duration-300 hover:shadow-md",i?"bg-amber-500":"bg-slate-700"),children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 overflow-hidden",children:[c&&m&&(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsx)(d,{size:"icon",variant:"ghost",className:"h-5 w-5 p-0 text-slate-400 hover:text-white disabled:opacity-30",onClick:()=>c(a.id),disabled:p,children:(0,t.jsx)(A.A,{className:"h-4 w-4"})}),(0,t.jsx)(d,{size:"icon",variant:"ghost",className:"h-5 w-5 p-0 text-slate-400 hover:text-white disabled:opacity-30",onClick:()=>m(a.id),disabled:u,children:(0,t.jsx)(E.A,{className:"h-4 w-4"})})]}),(0,t.jsxs)("div",{className:"overflow-hidden",children:[(0,t.jsxs)("p",{className:(0,n.cn)("font-bold truncate",i?"text-black":"text-sky-400"),children:[o&&(0,t.jsxs)("span",{className:"mr-2 text-slate-400 font-normal",children:[o,"."]}),a.name]}),(0,t.jsxs)("p",{className:(0,n.cn)("text-xs truncate",i?"text-slate-800":"text-slate-400"),children:["V/D: ",a.wins,"/",a.losses," | Tasa de Victorias: ",(100*a.winRate).toFixed(0),"% | Racha: ",(0,t.jsx)("span",{className:(0,n.cn)("font-bold",a.consecutiveWins>0?i?"text-white":"text-amber-400":""),children:a.consecutiveWins})]})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 flex-shrink-0",children:[r&&l&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(d,{size:"sm",onClick:()=>l(a.id,"A"),className:"h-7 w-7 p-0 bg-sky-700 hover:bg-sky-600 text-white border-none disabled:bg-slate-600 disabled:opacity-50",disabled:x,children:"A"}),(0,t.jsx)(d,{size:"sm",onClick:()=>l(a.id,"B"),className:"h-7 w-7 p-0 bg-teal-700 hover:bg-teal-600 text-white border-none disabled:bg-slate-600 disabled:opacity-50",disabled:f,children:"B"})]}),s&&(0,t.jsx)(d,{size:"icon",variant:"ghost",className:(0,n.cn)("h-7 w-7",i?"text-black hover:text-red-900":"text-slate-400 hover:text-red-500"),onClick:()=>s(a.id),children:(0,t.jsx)(S.A,{className:"h-4 w-4"})})]})]})},eg=e=>{let{team:a,onRemovePlayer:s}=e,r=(0,l.useMemo)(()=>0===a.players.length?0:a.players.reduce((e,a)=>e+a.winRate,0)/a.players.length,[a.players]);return(0,t.jsxs)(c,{className:"flex-1 min-w-[280px] bg-slate-800/80 border-slate-700",children:[(0,t.jsxs)(m,{children:[(0,t.jsxs)(p,{className:"flex items-center gap-2 text-2xl text-sky-400",children:[(0,t.jsx)(C.A,{})," ",a.name]}),(0,t.jsxs)(u,{className:"text-slate-400",children:["Tasa de Vic. Prom.: ",(100*r).toFixed(0),"%"]})]}),(0,t.jsx)(x,{className:"space-y-2",children:a.players.length>0?a.players.map(e=>(0,t.jsx)(eh,{player:e,onRemove:()=>s(e.id)},e.id)):(0,t.jsx)("div",{className:"text-center text-slate-500 py-8",children:"A\xf1ade jugadores a este equipo"})})]})},eN=(e,a,s,t)=>e.map(e=>{if(a.players.some(a=>a.id===e.id)){let a=e.wins+1;return{...e,wins:a,consecutiveWins:(e.consecutiveWins||0)+1,winRate:a/(a+e.losses)}}if(s.players.some(a=>a.id===e.id)){let a=e.losses+1;return{...e,losses:a,consecutiveWins:0,winRate:e.wins/(e.wins+a)}}return t&&t.players.some(a=>a.id===e.id)?{...e,consecutiveWins:0}:e});function ey(){let[e,a]=(0,l.useState)(!1),[s,r]=(0,l.useState)([]),[i,o]=(0,l.useState)([]),[h,g]=(0,l.useState)({name:"Equipo A",players:[]}),[y,v]=(0,l.useState)({name:"Equipo B",players:[]}),[A,E]=(0,l.useState)(null),[S,C]=(0,l.useState)(""),[D,_]=(0,l.useState)(!1),[z,J]=(0,l.useState)(!1),[U,G]=(0,l.useState)(2),[Z,et]=(0,l.useState)(!1),{toast:eo}=(0,w.dj)(),eu=(0,l.useMemo)(()=>({PLAYERS:"rotacionDeportiva.players",WAITING_LIST:"rotacionDeportiva.waitingListIds",TEAM_A:"rotacionDeportiva.teamA",TEAM_B:"rotacionDeportiva.teamB",CHAMPIONS:"rotacionDeportiva.championsTeam",WINS_TO_CHAMPION:"rotacionDeportiva.winsToChampion"}),[]);(0,l.useEffect)(()=>{try{let e=localStorage.getItem(eu.PLAYERS);e&&r(JSON.parse(e));let a=localStorage.getItem(eu.WAITING_LIST);a&&o(JSON.parse(a));let s=localStorage.getItem(eu.TEAM_A);s&&g(JSON.parse(s));let t=localStorage.getItem(eu.TEAM_B);t&&v(JSON.parse(t));let l=localStorage.getItem(eu.CHAMPIONS);l&&"null"!==l&&E(JSON.parse(l));let i=localStorage.getItem(eu.WINS_TO_CHAMPION);i&&G(JSON.parse(i))}catch(e){console.error("Error al cargar datos desde localStorage",e),eo({variant:"destructive",title:"Error al cargar datos",description:"No se pudieron cargar los datos guardados. Se empezar\xe1 de cero."})}a(!0)},[eu,eo]),(0,l.useEffect)(()=>{if(e)try{localStorage.setItem(eu.PLAYERS,JSON.stringify(s)),localStorage.setItem(eu.WAITING_LIST,JSON.stringify(i)),localStorage.setItem(eu.TEAM_A,JSON.stringify(h)),localStorage.setItem(eu.TEAM_B,JSON.stringify(y)),localStorage.setItem(eu.CHAMPIONS,JSON.stringify(A)),localStorage.setItem(eu.WINS_TO_CHAMPION,JSON.stringify(U))}catch(e){console.error("Error al guardar datos en localStorage",e)}},[s,i,h,y,A,U,e,eu]);let ef=(0,l.useMemo)(()=>{let e=new Map(s.map(e=>[e.id,e]));return i.map(a=>e.get(a)).filter(Boolean)},[s,i]),ey=(0,l.useMemo)(()=>[...s].sort((e,a)=>a.wins-e.wins),[s]);(0,l.useEffect)(()=>{J(ef.length>=10)},[ef.length]);let ej=()=>{let e=S.trim();if(""===e){let a=1,t="Jugador ".concat(a);for(;s.some(e=>e.name===t);)a++,t="Jugador ".concat(a);e=t}else if(s.some(a=>a.name.toLowerCase()===e.toLowerCase()))return void eo({variant:"destructive",title:"Nombre duplicado",description:'Ya existe un jugador con el nombre "'.concat(e,'".')});let a={id:crypto.randomUUID(),name:e,wins:0,losses:0,winRate:0,consecutiveWins:0};r(e=>[...e,a]),o(e=>[...e,a.id]),C(""),eo({title:"Jugador A\xf1adido",description:"".concat(a.name," est\xe1 ahora en la lista de espera.")})},ev=e=>{r(a=>a.filter(a=>a.id!==e)),o(a=>a.filter(a=>a!==e)),g(a=>{let s=a.players.filter(a=>a.id!==e),t=s.length>0?"Equipo ".concat(s[0].name):"Equipo A";return{...a,players:s,name:t}}),v(a=>{let s=a.players.filter(a=>a.id!==e),t=s.length>0?"Equipo ".concat(s[0].name):"Equipo B";return{...a,players:s,name:t}}),E(a=>{if(!a)return null;let s=a.players.filter(a=>a.id!==e);if(0===s.length)return null;let t=s.length>0?"Equipo ".concat(s[0].name):"Campeones";return{...a,players:s,name:t}})},eb=(e,a)=>{let t=s.find(a=>a.id===e);if(t)if("A"===a){if(h.players.length>=5)return void eo({variant:"destructive",title:"Equipo A ya est\xe1 lleno."});let a=[...h.players,t],l=i.filter(a=>a!==e);if(g({players:a,name:"Equipo ".concat(a[0].name)}),5===a.length&&0===y.players.length&&l.length>=5){let e=l.slice(0,5).map(e=>s.find(a=>a.id===e));v({players:e,name:"Equipo ".concat(e[0].name)}),o(l.slice(5)),eo({title:"Equipo B auto-completado",description:"Los 5 siguientes jugadores han formado el equipo."})}else o(l)}else{if(y.players.length>=5)return void eo({variant:"destructive",title:"Equipo B ya est\xe1 lleno."});let a=[...y.players,t],l=i.filter(a=>a!==e);if(v({players:a,name:"Equipo ".concat(a[0].name)}),5===a.length&&0===h.players.length&&l.length>=5){let e=l.slice(0,5).map(e=>s.find(a=>a.id===e));g({players:e,name:"Equipo ".concat(e[0].name)}),o(l.slice(5)),eo({title:"Equipo A auto-completado",description:"Los 5 siguientes jugadores han formado el equipo."})}else o(l)}},ew=e=>{let a=s.find(a=>a.id===e);if(!a)return;let t=h.players.find(a=>a.id===e)?"A":y.players.find(a=>a.id===e)?"B":null;if(!t)return;let l=ef.length>0?ef[0]:null;"A"===t?g(a=>{let s=a.players.filter(a=>a.id!==e);l&&s.push(l);let t=s.length>0?"Equipo ".concat(s[0].name):"Equipo A";return{...a,players:s,name:t}}):v(a=>{let s=a.players.filter(a=>a.id!==e);l&&s.push(l);let t=s.length>0?"Equipo ".concat(s[0].name):"Equipo B";return{...a,players:s,name:t}}),o(a=>[...l?a.slice(1):a,e]),l?eo({title:"Rotaci\xf3n Autom\xe1tica",description:"".concat(a.name," vuelve a la cola. ").concat(l.name," entra al juego.")}):eo({title:"Jugador en Espera",description:"".concat(a.name," ha vuelto a la lista de espera.")})},eA=e=>{if(!A)return;let a=A.players.find(a=>a.id===e);if(!a)return;let s=ef.length>0?ef[0]:null,t=A.players.filter(a=>a.id!==e),l=i;s?(t.push(s),l=l.slice(1),eo({title:"Rotaci\xf3n de Campe\xf3n",description:"".concat(a.name," vuelve a la cola. ").concat(s.name," se une a los campeones.")})):eo({title:"Campe\xf3n en Espera",description:"".concat(a.name," ha vuelto a la lista de espera. El equipo campe\xf3n est\xe1 incompleto.")}),o([...l,e]),0===t.length?E(null):E({...A,players:t})},eE=e=>{o(a=>{let s=a.indexOf(e);if(s>0){let e=[...a];return[e[s],e[s-1]]=[e[s-1],e[s]],e}return a})},eS=e=>{o(a=>{let s=a.indexOf(e);if(s<a.length-1&&-1!==s){let e=[...a];return[e[s],e[s+1]]=[e[s+1],e[s]],e}return a})},eC=(e,a)=>{eo({title:"Partido Interino Finalizado",description:"El ".concat(e.name," se enfrentar\xe1 al campe\xf3n.")});let t=eN(s,e,a,A),l=new Map(t.map(e=>[e.id,e])),i=A.players.map(e=>l.get(e.id)),n=e.players.map(e=>l.get(e.id));r(t),g({name:"Equipo ".concat(i[0].name),players:i}),v({name:"Equipo ".concat(n[0].name),players:n}),o(e=>[...e,...a.players.map(e=>e.id)]),E(null)},eR=(e,a,s,t)=>{eo({title:"\xa1Nuevos Campeones!",description:"".concat(e.name," ahora son campeones y descansar\xe1n.")}),E({name:"Campeones",players:s});let l=[...i,...a.players.map(e=>e.id)];if(l.length<10)eo({variant:"destructive",title:"No hay suficientes jugadores",description:"No hay suficientes jugadores en espera para un partido interino. Los equipos se han vaciado."}),g({name:"Equipo A",players:[]}),v({name:"Equipo B",players:[]}),o(l);else{let e=l.slice(0,10).map(e=>t.find(a=>a.id===e));g({name:"Equipo ".concat(e[0].name),players:e.slice(0,5)}),v({name:"Equipo ".concat(e[5].name),players:e.slice(5,10)}),o(l.slice(10))}r(t)},ek=(e,a,s,t)=>{let l=[...i,...s.players.map(e=>e.id)],n=l.slice(0,5);if(n.length<5){eo({variant:"destructive",title:"No hay suficientes jugadores",description:"No hay suficientes retadores. El equipo ganador se queda solo."});let s={name:"Equipo ".concat(a[0].name),players:a};"A"===e?(g(s),v({name:"Equipo B",players:[]})):(v(s),g({name:"Equipo A",players:[]})),o(l)}else{let s=l.slice(5),r=n.map(e=>t.find(a=>a.id===e)),i={name:"Equipo ".concat(r[0].name),players:r},d={name:("A"===e?h:y).name,players:a};"A"===e?(g(d),v(i)):(g(i),v(d)),o(s)}r(t)},eI=e=>{let a="A"===e?h:y,t="A"===e?y:h;if(a.players.length<5||t.players.length<5)return void eo({variant:"destructive",title:"Equipos incompletos",description:"Ambos equipos deben tener 5 jugadores."});if(A)return void eC(a,t);let l=eN(s,a,t),r=new Map(l.map(e=>[e.id,e])),i=a.players.map(e=>r.get(e.id)),n=i.length>0?i[0].consecutiveWins:0;z&&n>=U?eR(a,t,i,l):ek(e,i,t,l)};return e?(0,t.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 to-slate-800 text-slate-100 p-2 sm:p-4",children:(0,t.jsxs)("main",{className:"w-full max-w-7xl mx-auto",children:[(0,t.jsx)(H,{open:Z,onOpenChange:et,children:(0,t.jsxs)(K,{className:"bg-slate-800 border-slate-700",children:[(0,t.jsxs)(X,{children:[(0,t.jsx)($,{className:"text-amber-400",children:"\xbfDesactivar Regla del Campe\xf3n?"}),(0,t.jsx)(ee,{className:"text-slate-300",children:"Esta acci\xf3n disolver\xe1 el equipo campe\xf3n actual y devolver\xe1 a sus jugadores a la lista de espera. \xbfEst\xe1s seguro?"})]}),(0,t.jsxs)(Q,{children:[(0,t.jsx)(es,{className:"border-slate-600 hover:bg-slate-700",onClick:()=>et(!1),children:"Cancelar"}),(0,t.jsx)(ea,{onClick:()=>{J(!1),A?(o(e=>[...e,...A.players.map(e=>e.id)]),E(null),eo({title:"Regla Desactivada",description:"El equipo campe\xf3n ha sido disuelto y sus jugadores est\xe1n en la lista de espera."})):eo({title:"Regla del Campe\xf3n Desactivada"}),et(!1)},className:"bg-destructive hover:bg-red-700",children:"S\xed, desactivar"})]})]})}),(0,t.jsxs)("header",{className:"text-center mb-8",children:[(0,t.jsxs)("h1",{className:"font-bold text-3xl sm:text-4xl md:text-5xl text-sky-400 flex items-center justify-center gap-4 whitespace-nowrap",children:[(0,t.jsx)("img",{src:"/bluerotationicon.png",alt:"Icono de Rotaci\xf3n Deportiva",className:"h-8 w-8 sm:h-10 sm:w-10 md:h-12 md:w-12"}),"Rotaci\xf3n Deportiva"]}),(0,t.jsx)("p",{className:"text-slate-400 mt-2",children:"Gesti\xf3n de equipos para partidos amistosos"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,t.jsxs)("div",{className:"lg:col-span-1 space-y-8",children:[(0,t.jsxs)(c,{className:"bg-slate-800 border-slate-700",children:[(0,t.jsx)(m,{children:(0,t.jsxs)(p,{className:"flex items-center gap-2 text-sky-400",children:[(0,t.jsx)(R.A,{})," A\xf1adir Nuevo Jugador"]})}),(0,t.jsx)(x,{children:(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(f,{placeholder:"Ej., Nombre del Jugador",value:S,onChange:e=>C(e.target.value),onKeyDown:e=>"Enter"===e.key&&ej(),className:"bg-slate-700 border-slate-600 placeholder:text-slate-500"}),(0,t.jsx)(d,{onClick:ej,className:"bg-sky-600 hover:bg-sky-700 text-white",children:"A\xf1adir"})]})})]}),(0,t.jsx)(c,{className:"bg-slate-800 border-slate-700",children:(0,t.jsx)(el,{type:"single",collapsible:!0,className:"w-full",defaultValue:"item-1",children:(0,t.jsxs)(er,{value:"item-1",className:"border-b-0",children:[(0,t.jsx)(ei,{className:"p-6 hover:no-underline",children:(0,t.jsxs)("div",{className:"flex flex-col items-start w-full",children:[(0,t.jsxs)(p,{className:"flex items-center gap-2 text-sky-400",children:[(0,t.jsx)(k.A,{})," Lista de Espera (",ef.length,")"]}),(0,t.jsx)(u,{className:"text-slate-400 pt-2",children:"Los jugadores se a\xf1aden a los equipos desde aqu\\xed."})]})}),(0,t.jsx)(en,{children:(0,t.jsx)(x,{className:"px-6 pb-6 pt-0 space-y-2 max-h-[400px] overflow-y-auto",children:ef.length>0?ef.map((e,a)=>(0,t.jsx)(eh,{player:e,turn:a+1,onRemove:ev,onAssign:eb,showAssign:!0,onMoveUp:eE,onMoveDown:eS,isFirst:0===a,isLast:a===ef.length-1,isTeamAFull:h.players.length>=5,isTeamBFull:y.players.length>=5},e.id)):(0,t.jsx)("p",{className:"text-slate-500 text-center py-4",children:"No hay jugadores en espera."})})})]})})}),(0,t.jsx)(el,{type:"single",collapsible:!0,className:"w-full",children:(0,t.jsx)(er,{value:"item-1",className:"border-none",children:(0,t.jsxs)(c,{className:(0,n.cn)("border-slate-700 transition-all",A?"bg-gradient-to-br from-amber-500 to-yellow-400":"bg-slate-800"),children:[(0,t.jsx)(ei,{className:"p-6 hover:no-underline",children:A?(0,t.jsxs)("div",{className:"text-white text-left w-full",children:[(0,t.jsxs)(p,{className:"flex items-center gap-2 text-white",children:[(0,t.jsx)(I.A,{className:"h-6 w-6"})," Campe\xf3n Descansando"]}),(0,t.jsxs)(u,{className:"text-amber-100 pt-2",children:["Racha Actual: ",A.players[0].consecutiveWins," victorias. Esperando retador."]})]}):(0,t.jsxs)("div",{className:"flex flex-col items-start w-full",children:[(0,t.jsxs)(p,{className:"flex items-center gap-2 text-sky-400",children:[(0,t.jsx)(q.A,{})," Regla del Campe\xf3n"]}),(0,t.jsx)(u,{className:"text-slate-400 pt-2",children:"Configura las reglas para coronar a un equipo campe\xf3n."})]})}),(0,t.jsx)(en,{children:A?(0,t.jsxs)(x,{className:"px-6 pb-6 pt-0 text-white",children:[(0,t.jsx)("div",{className:"space-y-2",children:A.players.map(e=>(0,t.jsx)(eh,{player:e,onRemove:eA,isChampion:!0},e.id))}),(0,t.jsx)(d,{className:"w-full mt-6 bg-indigo-600 hover:bg-indigo-700 text-white border-none",onClick:()=>{A&&(o(e=>[...e,...A.players.map(e=>e.id)]),E(null))},children:"Devolver a la Lista de Espera"})]}):(0,t.jsxs)(x,{className:"px-6 pb-6 pt-0",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,t.jsx)(j,{id:"champion-rule",checked:z,disabled:!z&&ef.length<10,onCheckedChange:e=>{if(e){if(ef.length<10)return void eo({variant:"destructive",title:"No se puede activar",description:"Se necesitan al menos 10 jugadores en espera para activar la Regla del Campe\xf3n."});J(!0),eo({title:"Regla del Campe\xf3n Activada"})}else A?et(!0):(J(!1),eo({title:"Regla del Campe\xf3n Desactivada"}))}}),(0,t.jsx)(N,{htmlFor:"champion-rule",children:z?"Regla activada":"Regla desactivada"})]}),(0,t.jsx)("p",{className:"text-xs mb-4 text-slate-400",children:z?"El equipo campe\xf3n descansar\xe1.":"Se activa con 10 o m\xe1s jugadores en espera."}),(0,t.jsxs)("div",{className:"flex items-center gap-2 my-4",children:[(0,t.jsx)(N,{htmlFor:"wins-to-champion",children:"Victorias para ser campe\\xf3n:"}),(0,t.jsx)(f,{id:"wins-to-champion",type:"number",value:U,onChange:e=>G(Math.max(1,Number(e.target.value))),className:"w-20 bg-slate-700 border-slate-600 text-white",min:"1"})]}),(0,t.jsx)(b,{className:"bg-slate-700"}),(0,t.jsx)("p",{className:"text-center py-4 text-slate-500 mt-2",children:"No hay un equipo campe\xf3n descansando."})]})})]})})})]}),(0,t.jsx)("div",{className:"lg:col-span-2 space-y-8",children:(0,t.jsxs)(c,{className:"bg-slate-800/50 border-slate-700",children:[(0,t.jsxs)(m,{children:[(0,t.jsx)(p,{className:"text-3xl text-sky-400",children:A?"Partido Interino":"Equipos Actuales"}),A&&(0,t.jsxs)(u,{className:"text-yellow-400",children:["El ganador de este partido se enfrentar\xe1 al campe\xf3n: ",A.name]})]}),(0,t.jsxs)(x,{className:"space-y-6",children:[(0,t.jsxs)(ed,{defaultValue:"team-a",className:"w-full",children:[(0,t.jsxs)(ec,{className:"grid w-full grid-cols-2",children:[(0,t.jsx)(em,{value:"team-a",children:h.name}),(0,t.jsx)(em,{value:"team-b",children:y.name})]}),(0,t.jsx)(ep,{value:"team-a",children:(0,t.jsx)(eg,{team:h,onRemovePlayer:ew})}),(0,t.jsx)(ep,{value:"team-b",children:(0,t.jsx)(eg,{team:y,onRemovePlayer:ew})})]}),(0,t.jsx)(b,{className:"bg-slate-700"}),(0,t.jsxs)("div",{className:"text-center space-y-4",children:[(0,t.jsx)("h3",{className:"text-2xl text-sky-400",children:"Registrar Resultado del Partido"}),(0,t.jsxs)("div",{className:"flex flex-wrap justify-center gap-4",children:[(0,t.jsxs)(d,{size:"lg",className:"bg-emerald-600 hover:bg-emerald-700 text-white border-none",onClick:()=>eI("A"),disabled:h.players.length<5||y.players.length<5,children:[(0,t.jsx)(I.A,{className:"mr-2 h-4 w-4"})," Gan\xf3 ",h.name]}),(0,t.jsxs)(d,{size:"lg",className:"bg-emerald-600 hover:bg-emerald-700 text-white border-none",onClick:()=>eI("B"),disabled:h.players.length<5||y.players.length<5,children:[(0,t.jsx)(I.A,{className:"mr-2 h-4 w-4"})," Gan\xf3 ",y.name]})]}),(0,t.jsx)("div",{className:"pt-4",children:(0,t.jsxs)(c,{className:"bg-slate-800 border-slate-700 max-w-sm mx-auto",children:[(0,t.jsx)(m,{children:(0,t.jsx)(p,{className:"flex items-center gap-2 text-sky-400",children:"Acciones del D\xeda"})}),(0,t.jsx)(x,{children:(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row gap-2",children:[(0,t.jsxs)(M,{open:D,onOpenChange:_,children:[(0,t.jsx)(L,{asChild:!0,children:(0,t.jsxs)(d,{className:"w-full bg-indigo-600 hover:bg-indigo-700 text-white",children:[(0,t.jsx)(T.A,{className:"mr-2 h-4 w-4"}),"Finalizar el D\xeda y Ver Resumen"]})}),(0,t.jsxs)(B,{className:"max-w-md bg-slate-800 border-slate-700 text-slate-100",children:[(0,t.jsxs)(P,{children:[(0,t.jsx)(V,{className:"text-sky-400 text-2xl",children:"Resumen del D\xeda"}),(0,t.jsx)(W,{className:"text-slate-400",children:"Estad\xedsticas de los jugadores de hoy. \xa1Buen juego a todos!"})]}),(0,t.jsx)(ex,{className:"h-[60vh]",children:(0,t.jsx)("div",{className:"space-y-3 pr-4",children:ey.length>0?ey.map(e=>(0,t.jsxs)("div",{className:"flex justify-between items-center bg-slate-700 p-3 rounded-lg",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-bold text-sky-400",children:e.name}),(0,t.jsxs)("p",{className:"text-sm text-slate-300",children:["Juegos Jugados: ",e.wins+e.losses]})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsxs)("p",{className:"font-semibold text-emerald-400",children:["Victorias: ",e.wins]}),(0,t.jsxs)("p",{className:"text-sm text-slate-400",children:["Derrotas: ",e.losses]})]})]},e.id)):(0,t.jsx)("p",{className:"text-slate-500 text-center py-8",children:"No se han registrado jugadores hoy."})})}),(0,t.jsxs)(F,{id:"summary-dialog-footer",className:"sm:justify-between gap-2 mt-4 flex-col-reverse sm:flex-row",children:[(0,t.jsxs)(H,{children:[(0,t.jsx)(Y,{asChild:!0,children:(0,t.jsxs)(d,{variant:"destructive",className:"w-full sm:w-auto",children:[(0,t.jsx)(O.A,{className:"mr-2 h-4 w-4"}),"Reiniciar Todo"]})}),(0,t.jsxs)(K,{className:"bg-slate-800 border-slate-700",children:[(0,t.jsxs)(X,{children:[(0,t.jsx)($,{className:"text-amber-400",children:"\xbfEst\xe1s seguro?"}),(0,t.jsx)(ee,{className:"text-slate-300",children:"Esta acci\xf3n es irreversible. Se borrar\xe1n todos los jugadores, equipos y estad\xedsticas guardadas."})]}),(0,t.jsxs)(Q,{children:[(0,t.jsx)(es,{className:"border-slate-600 hover:bg-slate-700",children:"Cancelar"}),(0,t.jsx)(ea,{onClick:()=>{r([]),o([]),g({name:"Equipo A",players:[]}),v({name:"Equipo B",players:[]}),E(null),C(""),localStorage.removeItem(eu.PLAYERS),localStorage.removeItem(eu.WAITING_LIST),localStorage.removeItem(eu.TEAM_A),localStorage.removeItem(eu.TEAM_B),localStorage.removeItem(eu.CHAMPIONS),_(!1),eo({title:"D\xeda Finalizado",description:"Todos los datos han sido reiniciados. \xa1Hasta la pr\xf3xima!"})},className:"bg-destructive hover:bg-red-700",children:"S\xed, reiniciar"})]})]})]}),(0,t.jsx)("div",{className:"flex flex-col-reverse sm:flex-row gap-2",children:(0,t.jsx)(d,{type:"button",variant:"secondary",onClick:()=>_(!1),children:"Cerrar"})})]})]})]}),(0,t.jsxs)(H,{children:[(0,t.jsx)(Y,{asChild:!0,children:(0,t.jsxs)(d,{variant:"outline",className:"w-full border-slate-600 hover:bg-slate-700",children:[(0,t.jsx)(O.A,{className:"mr-2 h-4 w-4"}),"Enviar todos a espera"]})}),(0,t.jsxs)(K,{className:"bg-slate-800 border-slate-700",children:[(0,t.jsxs)(X,{children:[(0,t.jsx)($,{className:"text-amber-400",children:"\xbfEst\xe1s seguro?"}),(0,t.jsx)(ee,{className:"text-slate-300",children:"Esta acci\xf3n mover\xe1 a todos los jugadores de los equipos y campeones a la lista de espera."})]}),(0,t.jsxs)(Q,{children:[(0,t.jsx)(es,{className:"border-slate-600 hover:bg-slate-700",children:"Cancelar"}),(0,t.jsx)(ea,{onClick:()=>{let e=new Set([...h.players.map(e=>e.id),...y.players.map(e=>e.id),...A?A.players.map(e=>e.id):[]]);o([...i,...s.filter(a=>e.has(a.id)).map(e=>e.id)].filter((e,a,s)=>s.indexOf(e)===a)),g({name:"Equipo A",players:[]}),v({name:"Equipo B",players:[]}),E(null),eo({title:"Jugadores en Espera",description:"Todos los jugadores en equipos activos han sido movidos a la lista de espera."})},className:"bg-destructive hover:bg-red-700",children:"S\xed, enviar a todos"})]})]})]})]})})]})})]})]})]})})]})]})}):(0,t.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 to-slate-800 text-slate-100 p-2 sm:p-4 flex items-center justify-center",children:(0,t.jsx)("div",{className:"text-center",children:(0,t.jsx)("h1",{className:"font-bold text-5xl text-sky-400",children:"Cargando..."})})})}},7481:(e,a,s)=>{"use strict";s.d(a,{dj:()=>p});var t=s(2115);let l=0,r=new Map,i=e=>{if(r.has(e))return;let a=setTimeout(()=>{r.delete(e),c({type:"REMOVE_TOAST",toastId:e})},1e6);r.set(e,a)},n=(e,a)=>{switch(a.type){case"ADD_TOAST":return{...e,toasts:[a.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===a.toast.id?{...e,...a.toast}:e)};case"DISMISS_TOAST":{let{toastId:s}=a;return s?i(s):e.toasts.forEach(e=>{i(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===a.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==a.toastId)}}},o=[],d={toasts:[]};function c(e){d=n(d,e),o.forEach(e=>{e(d)})}function m(e){let{...a}=e,s=(l=(l+1)%Number.MAX_SAFE_INTEGER).toString(),t=()=>c({type:"DISMISS_TOAST",toastId:s});return c({type:"ADD_TOAST",toast:{...a,id:s,open:!0,onOpenChange:e=>{e||t()}}}),{id:s,dismiss:t,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:s}})}}function p(){let[e,a]=t.useState(d);return t.useEffect(()=>(o.push(a),()=>{let e=o.indexOf(a);e>-1&&o.splice(e,1)}),[e]),{...e,toast:m,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}},9434:(e,a,s)=>{"use strict";s.d(a,{cn:()=>r});var t=s(2596),l=s(9688);function r(){for(var e=arguments.length,a=Array(e),s=0;s<e;s++)a[s]=arguments[s];return(0,l.QP)((0,t.$)(a))}}},e=>{var a=a=>e(e.s=a);e.O(0,[222,642,441,721,358],()=>a(4160)),_N_E=e.O()}]);