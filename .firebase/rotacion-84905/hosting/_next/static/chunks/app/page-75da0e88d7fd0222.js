(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{4160:(e,a,s)=>{Promise.resolve().then(s.bind(s,6172))},6172:(e,a,s)=>{"use strict";s.d(a,{RotacionDeportiva:()=>ev});var t=s(5155),l=s(2115),r=s(4253),i=s(2085),n=s(9434);let o=(0,i.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=l.forwardRef((e,a)=>{let{className:s,variant:l,size:i,asChild:d=!1,...c}=e,m=d?r.DX:"button";return(0,t.jsx)(m,{className:(0,n.cn)(o({variant:l,size:i,className:s})),ref:a,...c})});d.displayName="Button";let c=l.forwardRef((e,a)=>{let{className:s,...l}=e;return(0,t.jsx)("div",{ref:a,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",s),...l})});c.displayName="Card";let m=l.forwardRef((e,a)=>{let{className:s,...l}=e;return(0,t.jsx)("div",{ref:a,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",s),...l})});m.displayName="CardHeader";let p=l.forwardRef((e,a)=>{let{className:s,...l}=e;return(0,t.jsx)("div",{ref:a,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",s),...l})});p.displayName="CardTitle";let u=l.forwardRef((e,a)=>{let{className:s,...l}=e;return(0,t.jsx)("div",{ref:a,className:(0,n.cn)("text-sm text-muted-foreground",s),...l})});u.displayName="CardDescription";let x=l.forwardRef((e,a)=>{let{className:s,...l}=e;return(0,t.jsx)("div",{ref:a,className:(0,n.cn)("p-6 pt-0",s),...l})});x.displayName="CardContent",l.forwardRef((e,a)=>{let{className:s,...l}=e;return(0,t.jsx)("div",{ref:a,className:(0,n.cn)("flex items-center p-6 pt-0",s),...l})}).displayName="CardFooter";let f=l.forwardRef((e,a)=>{let{className:s,type:l,...r}=e;return(0,t.jsx)("input",{type:l,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:a,...r})});f.displayName="Input";var h=s(968);let g=(0,i.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),N=l.forwardRef((e,a)=>{let{className:s,...l}=e;return(0,t.jsx)(h.b,{ref:a,className:(0,n.cn)(g(),s),...l})});N.displayName=h.b.displayName;var y=s(8611);let v=l.forwardRef((e,a)=>{let{className:s,...l}=e;return(0,t.jsx)(y.bL,{className:(0,n.cn)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",s),...l,ref:a,children:(0,t.jsx)(y.zi,{className:(0,n.cn)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})})});v.displayName=y.bL.displayName;var j=s(7489);let b=l.forwardRef((e,a)=>{let{className:s,orientation:l="horizontal",decorative:r=!0,...i}=e;return(0,t.jsx)(j.b,{ref:a,decorative:r,orientation:l,className:(0,n.cn)("shrink-0 bg-border","horizontal"===l?"h-[1px] w-full":"h-full w-[1px]",s),...i})});b.displayName=j.b.displayName;var w=s(7481),E=s(7381),A=s(9556),S=s(7223),C=s(1816),k=s(8553),R=s(8046),q=s(286),I=s(5268),T=s(4913),O=s(1545),D=s(7554),_=s(7390),M=s(5668),L=s(5318);let B=M.bL,z=M.l9,J=M.ZL;M.bm;let P=l.forwardRef((e,a)=>{let{className:s,...l}=e;return(0,t.jsx)(M.hJ,{ref:a,className:(0,n.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...l})});P.displayName=M.hJ.displayName;let W=l.forwardRef((e,a)=>{let{className:s,children:l,...r}=e;return(0,t.jsxs)(J,{children:[(0,t.jsx)(P,{}),(0,t.jsxs)(M.UC,{ref:a,className:(0,n.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...r,children:[l,(0,t.jsxs)(M.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,t.jsx)(L.A,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});W.displayName=M.UC.displayName;let F=e=>{let{className:a,...s}=e;return(0,t.jsx)("div",{className:(0,n.cn)("flex flex-col space-y-1.5 text-center sm:text-left",a),...s})};F.displayName="DialogHeader";let V=e=>{let{className:a,...s}=e;return(0,t.jsx)("div",{className:(0,n.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",a),...s})};V.displayName="DialogFooter";let U=l.forwardRef((e,a)=>{let{className:s,...l}=e;return(0,t.jsx)(M.hE,{ref:a,className:(0,n.cn)("text-lg font-semibold leading-none tracking-tight",s),...l})});U.displayName=M.hE.displayName;let H=l.forwardRef((e,a)=>{let{className:s,...l}=e;return(0,t.jsx)(M.VY,{ref:a,className:(0,n.cn)("text-sm text-muted-foreground",s),...l})});H.displayName=M.VY.displayName;var Y=s(2278);let G=Y.bL,Z=Y.l9,K=Y.ZL,X=l.forwardRef((e,a)=>{let{className:s,...l}=e;return(0,t.jsx)(Y.hJ,{className:(0,n.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...l,ref:a})});X.displayName=Y.hJ.displayName;let Q=l.forwardRef((e,a)=>{let{className:s,...l}=e;return(0,t.jsxs)(K,{children:[(0,t.jsx)(X,{}),(0,t.jsx)(Y.UC,{ref:a,className:(0,n.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...l})]})});Q.displayName=Y.UC.displayName;let $=e=>{let{className:a,...s}=e;return(0,t.jsx)("div",{className:(0,n.cn)("flex flex-col space-y-2 text-center sm:text-left",a),...s})};$.displayName="AlertDialogHeader";let ee=e=>{let{className:a,...s}=e;return(0,t.jsx)("div",{className:(0,n.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",a),...s})};ee.displayName="AlertDialogFooter";let ea=l.forwardRef((e,a)=>{let{className:s,...l}=e;return(0,t.jsx)(Y.hE,{ref:a,className:(0,n.cn)("text-lg font-semibold",s),...l})});ea.displayName=Y.hE.displayName;let es=l.forwardRef((e,a)=>{let{className:s,...l}=e;return(0,t.jsx)(Y.VY,{ref:a,className:(0,n.cn)("text-sm text-muted-foreground",s),...l})});es.displayName=Y.VY.displayName;let et=l.forwardRef((e,a)=>{let{className:s,...l}=e;return(0,t.jsx)(Y.rc,{ref:a,className:(0,n.cn)(o(),s),...l})});et.displayName=Y.rc.displayName;let el=l.forwardRef((e,a)=>{let{className:s,...l}=e;return(0,t.jsx)(Y.ZD,{ref:a,className:(0,n.cn)(o({variant:"outline"}),"mt-2 sm:mt-0",s),...l})});el.displayName=Y.ZD.displayName;var er=s(7250);let ei=er.bL,en=l.forwardRef((e,a)=>{let{className:s,...l}=e;return(0,t.jsx)(er.q7,{ref:a,className:(0,n.cn)("border-b",s),...l})});en.displayName="AccordionItem";let eo=l.forwardRef((e,a)=>{let{className:s,children:l,...r}=e;return(0,t.jsx)(er.Y9,{className:"flex",children:(0,t.jsxs)(er.l9,{ref:a,className:(0,n.cn)("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",s),...r,children:[l,(0,t.jsx)(A.A,{className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})})});eo.displayName=er.l9.displayName;let ed=l.forwardRef((e,a)=>{let{className:s,children:l,...r}=e;return(0,t.jsx)(er.UC,{ref:a,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...r,children:(0,t.jsx)("div",{className:(0,n.cn)("pb-4 pt-0",s),children:l})})});ed.displayName=er.UC.displayName;var ec=s(64);let em=ec.bL,ep=l.forwardRef((e,a)=>{let{className:s,...l}=e;return(0,t.jsx)(ec.B8,{ref:a,className:(0,n.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",s),...l})});ep.displayName=ec.B8.displayName;let eu=l.forwardRef((e,a)=>{let{className:s,...l}=e;return(0,t.jsx)(ec.l9,{ref:a,className:(0,n.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",s),...l})});eu.displayName=ec.l9.displayName;let ex=l.forwardRef((e,a)=>{let{className:s,...l}=e;return(0,t.jsx)(ec.UC,{ref:a,className:(0,n.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",s),...l})});ex.displayName=ec.UC.displayName;var ef=s(9051);let eh=l.forwardRef((e,a)=>{let{className:s,children:l,...r}=e;return(0,t.jsxs)(ef.bL,{ref:a,className:(0,n.cn)("relative overflow-hidden",s),...r,children:[(0,t.jsx)(ef.LM,{className:"h-full w-full rounded-[inherit]",children:l}),(0,t.jsx)(eg,{}),(0,t.jsx)(ef.OK,{})]})});eh.displayName=ef.bL.displayName;let eg=l.forwardRef((e,a)=>{let{className:s,orientation:l="vertical",...r}=e;return(0,t.jsx)(ef.VM,{ref:a,orientation:l,className:(0,n.cn)("flex touch-none select-none transition-colors","vertical"===l&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===l&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",s),...r,children:(0,t.jsx)(ef.lr,{className:"relative flex-1 rounded-full bg-border"})})});eg.displayName=ef.VM.displayName;let eN=e=>{let{player:a,onRemove:s,onAssign:l,showAssign:r,isChampion:i,turn:o,onMoveUp:c,onMoveDown:m,isFirst:p,isLast:u,isTeamAFull:x,isTeamBFull:f}=e;return(0,t.jsxs)("div",{className:(0,n.cn)("relative flex items-center justify-between p-3 rounded-lg shadow-sm transition-all duration-300 hover:shadow-md",i?"bg-amber-500":"bg-slate-700"),children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 overflow-hidden",children:[c&&m&&(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsx)(d,{size:"icon",variant:"ghost",className:"h-5 w-5 p-0 text-slate-400 hover:text-white disabled:opacity-30",onClick:()=>c(a.id),disabled:p,children:(0,t.jsx)(E.A,{className:"h-4 w-4"})}),(0,t.jsx)(d,{size:"icon",variant:"ghost",className:"h-5 w-5 p-0 text-slate-400 hover:text-white disabled:opacity-30",onClick:()=>m(a.id),disabled:u,children:(0,t.jsx)(A.A,{className:"h-4 w-4"})})]}),(0,t.jsxs)("div",{className:"overflow-hidden",children:[(0,t.jsxs)("p",{className:(0,n.cn)("font-bold truncate",i?"text-black":"text-sky-400"),children:[o&&(0,t.jsxs)("span",{className:"mr-2 text-slate-400 font-normal",children:[o,"."]}),a.name]}),(0,t.jsxs)("p",{className:(0,n.cn)("text-xs truncate",i?"text-slate-800":"text-slate-400"),children:["V/D: ",a.wins,"/",a.losses," | Tasa de Victorias: ",(100*a.winRate).toFixed(0),"% | Racha: ",(0,t.jsx)("span",{className:(0,n.cn)("font-bold",a.consecutiveWins>0?i?"text-white":"text-amber-400":""),children:a.consecutiveWins})]})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 flex-shrink-0",children:[r&&l&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(d,{size:"sm",onClick:()=>l(a.id,"A"),className:"h-7 w-7 p-0 bg-sky-700 hover:bg-sky-600 text-white border-none disabled:bg-slate-600 disabled:opacity-50",disabled:x,children:"A"}),(0,t.jsx)(d,{size:"sm",onClick:()=>l(a.id,"B"),className:"h-7 w-7 p-0 bg-teal-700 hover:bg-teal-600 text-white border-none disabled:bg-slate-600 disabled:opacity-50",disabled:f,children:"B"})]}),s&&(0,t.jsx)(d,{size:"icon",variant:"ghost",className:(0,n.cn)("h-7 w-7",i?"text-black hover:text-red-900":"text-slate-400 hover:text-red-500"),onClick:()=>s(a.id),children:(0,t.jsx)(S.A,{className:"h-4 w-4"})})]})]})},ey=e=>{let{team:a,onRemovePlayer:s}=e,r=(0,l.useMemo)(()=>0===a.players.length?0:a.players.reduce((e,a)=>e+a.winRate,0)/a.players.length,[a.players]);return(0,t.jsxs)(c,{className:"flex-1 min-w-[280px] bg-slate-800/80 border-slate-700",children:[(0,t.jsxs)(m,{children:[(0,t.jsxs)(p,{className:"flex items-center gap-2 text-2xl text-sky-400",children:[(0,t.jsx)(C.A,{})," ",a.name]}),(0,t.jsxs)(u,{className:"text-slate-400",children:["Tasa de Vic. Prom.: ",(100*r).toFixed(0),"%"]})]}),(0,t.jsx)(x,{className:"space-y-2",children:a.players.length>0?a.players.map(e=>(0,t.jsx)(eN,{player:e,onRemove:()=>s(e.id)},e.id)):(0,t.jsx)("div",{className:"text-center text-slate-500 py-8",children:"A\xf1ade jugadores a este equipo"})})]})};function ev(){let[e,a]=(0,l.useState)(!1),[r,i]=(0,l.useState)([]),[o,h]=(0,l.useState)([]),[g,y]=(0,l.useState)({name:"Equipo A",players:[]}),[j,E]=(0,l.useState)({name:"Equipo B",players:[]}),[A,S]=(0,l.useState)(null),[C,M]=(0,l.useState)(""),[L,J]=(0,l.useState)(!1),[P,Y]=(0,l.useState)(!1),[K,X]=(0,l.useState)(2),[er,ec]=(0,l.useState)(!1),ef=(0,l.useRef)(null),{toast:eg}=(0,w.dj)(),ev=(0,l.useMemo)(()=>({PLAYERS:"rotacionDeportiva.players",WAITING_LIST:"rotacionDeportiva.waitingListIds",TEAM_A:"rotacionDeportiva.teamA",TEAM_B:"rotacionDeportiva.teamB",CHAMPIONS:"rotacionDeportiva.championsTeam",WINS_TO_CHAMPION:"rotacionDeportiva.winsToChampion"}),[]);(0,l.useEffect)(()=>{try{let e=localStorage.getItem(ev.PLAYERS);e&&i(JSON.parse(e));let a=localStorage.getItem(ev.WAITING_LIST);a&&h(JSON.parse(a));let s=localStorage.getItem(ev.TEAM_A);s&&y(JSON.parse(s));let t=localStorage.getItem(ev.TEAM_B);t&&E(JSON.parse(t));let l=localStorage.getItem(ev.CHAMPIONS);l&&"null"!==l&&S(JSON.parse(l));let r=localStorage.getItem(ev.WINS_TO_CHAMPION);r&&X(JSON.parse(r))}catch(e){console.error("Error al cargar datos desde localStorage",e),eg({variant:"destructive",title:"Error al cargar datos",description:"No se pudieron cargar los datos guardados. Se empezar\xe1 de cero."})}a(!0)},[ev,eg]),(0,l.useEffect)(()=>{if(e)try{localStorage.setItem(ev.PLAYERS,JSON.stringify(r)),localStorage.setItem(ev.WAITING_LIST,JSON.stringify(o)),localStorage.setItem(ev.TEAM_A,JSON.stringify(g)),localStorage.setItem(ev.TEAM_B,JSON.stringify(j)),localStorage.setItem(ev.CHAMPIONS,JSON.stringify(A)),localStorage.setItem(ev.WINS_TO_CHAMPION,JSON.stringify(K))}catch(e){console.error("Error al guardar datos en localStorage",e)}},[r,o,g,j,A,K,e,ev]);let ej=(0,l.useMemo)(()=>{let e=new Map(r.map(e=>[e.id,e]));return o.map(a=>e.get(a)).filter(Boolean)},[r,o]),eb=(0,l.useMemo)(()=>[...r].sort((e,a)=>a.wins-e.wins),[r]);(0,l.useEffect)(()=>{Y(ej.length>=10)},[ej.length]);let ew=async()=>{if(null!==ef.current)try{let{toJpeg:e}=await s.e(64).then(s.bind(s,8064)),a=await e(ef.current,{quality:.95,filter:e=>"summary-dialog-footer"!==e.id,backgroundColor:"#1e293b"}),t=document.createElement("a");t.download="resumen-del-dia.jpg",t.href=a,t.click(),t.remove()}catch(e){console.error("oops, something went wrong!",e),eg({variant:"destructive",title:"Error al generar imagen",description:"No se pudo crear la imagen del resumen."})}},eE=()=>{let e=C.trim();if(""===e){let a=1,s="Jugador ".concat(a);for(;r.some(e=>e.name===s);)a++,s="Jugador ".concat(a);e=s}else if(r.some(a=>a.name.toLowerCase()===e.toLowerCase()))return void eg({variant:"destructive",title:"Nombre duplicado",description:'Ya existe un jugador con el nombre "'.concat(e,'".')});let a={id:crypto.randomUUID(),name:e,wins:0,losses:0,winRate:0,consecutiveWins:0};i(e=>[...e,a]),h(e=>[...e,a.id]),M(""),eg({title:"Jugador A\xf1adido",description:"".concat(a.name," est\xe1 ahora en la lista de espera.")})},eA=e=>{i(a=>a.filter(a=>a.id!==e)),h(a=>a.filter(a=>a!==e)),y(a=>{let s=a.players.filter(a=>a.id!==e),t=s.length>0?"Equipo ".concat(s[0].name):"Equipo A";return{...a,players:s,name:t}}),E(a=>{let s=a.players.filter(a=>a.id!==e),t=s.length>0?"Equipo ".concat(s[0].name):"Equipo B";return{...a,players:s,name:t}}),S(a=>{if(!a)return null;let s=a.players.filter(a=>a.id!==e);if(0===s.length)return null;let t=s.length>0?"Equipo ".concat(s[0].name):"Campeones";return{...a,players:s,name:t}})},eS=(e,a)=>{let s=r.find(a=>a.id===e);if(s)if("A"===a){if(g.players.length>=5)return void eg({variant:"destructive",title:"Equipo A ya est\xe1 lleno."});let a=[...g.players,s],t=o.filter(a=>a!==e);if(y({players:a,name:"Equipo ".concat(a[0].name)}),5===a.length&&0===j.players.length&&t.length>=5){let e=t.slice(0,5).map(e=>r.find(a=>a.id===e));E({players:e,name:"Equipo ".concat(e[0].name)}),h(t.slice(5)),eg({title:"Equipo B auto-completado",description:"Los 5 siguientes jugadores han formado el equipo."})}else h(t)}else{if(j.players.length>=5)return void eg({variant:"destructive",title:"Equipo B ya est\xe1 lleno."});let a=[...j.players,s],t=o.filter(a=>a!==e);if(E({players:a,name:"Equipo ".concat(a[0].name)}),5===a.length&&0===g.players.length&&t.length>=5){let e=t.slice(0,5).map(e=>r.find(a=>a.id===e));y({players:e,name:"Equipo ".concat(e[0].name)}),h(t.slice(5)),eg({title:"Equipo A auto-completado",description:"Los 5 siguientes jugadores han formado el equipo."})}else h(t)}},eC=e=>{let a=r.find(a=>a.id===e);if(!a)return;let s=g.players.find(a=>a.id===e)?"A":j.players.find(a=>a.id===e)?"B":null;if(!s)return;let t=ej.length>0?ej[0]:null;"A"===s?y(a=>{let s=a.players.filter(a=>a.id!==e);t&&s.push(t);let l=s.length>0?"Equipo ".concat(s[0].name):"Equipo A";return{...a,players:s,name:l}}):E(a=>{let s=a.players.filter(a=>a.id!==e);t&&s.push(t);let l=s.length>0?"Equipo ".concat(s[0].name):"Equipo B";return{...a,players:s,name:l}}),h(a=>[...t?a.slice(1):a,e]),t?eg({title:"Rotaci\xf3n Autom\xe1tica",description:"".concat(a.name," vuelve a la cola. ").concat(t.name," entra al juego.")}):eg({title:"Jugador en Espera",description:"".concat(a.name," ha vuelto a la lista de espera.")})},ek=e=>{if(!A)return;let a=A.players.find(a=>a.id===e);if(!a)return;let s=ej.length>0?ej[0]:null,t=A.players.filter(a=>a.id!==e),l=o;s?(t.push(s),l=l.slice(1),eg({title:"Rotaci\xf3n de Campe\xf3n",description:"".concat(a.name," vuelve a la cola. ").concat(s.name," se une a los campeones.")})):eg({title:"Campe\xf3n en Espera",description:"".concat(a.name," ha vuelto a la lista de espera. El equipo campe\xf3n est\xe1 incompleto.")}),h([...l,e]),0===t.length?S(null):S({...A,players:t})},eR=e=>{h(a=>{let s=a.indexOf(e);if(s>0){let e=[...a];return[e[s],e[s-1]]=[e[s-1],e[s]],e}return a})},eq=e=>{h(a=>{let s=a.indexOf(e);if(s<a.length-1&&-1!==s){let e=[...a];return[e[s],e[s+1]]=[e[s+1],e[s]],e}return a})},eI=e=>{let a="A"===e?g:j,s="A"===e?j:g;if(a.players.length<5||s.players.length<5)return void eg({variant:"destructive",title:"Equipos incompletos",description:"Ambos equipos deben tener 5 jugadores."});if(A){eg({title:"Partido Interino Finalizado",description:"El ".concat(a.name," se enfrentar\xe1 al campe\xf3n.")});let e=[...o,...s.players.map(e=>e.id)],t=r.map(e=>{if(s.players.some(a=>a.id===e.id)){let a=e.losses+1;return{...e,losses:a,consecutiveWins:0,winRate:e.wins/(e.wins+a)}}if(a.players.some(a=>a.id===e.id)){let a=e.wins+1,s=e.consecutiveWins||0;return{...e,wins:a,consecutiveWins:s+1,winRate:a/(a+e.losses)}}return A.players.some(a=>a.id===e.id)?{...e,consecutiveWins:0}:e}),l=new Map(t.map(e=>[e.id,e])),n=A.players.map(e=>l.get(e.id)).filter(Boolean),d=a.players.map(e=>l.get(e.id)).filter(Boolean),c={name:"Equipo ".concat(n[0].name),players:n},m={name:"Equipo ".concat(d[0].name),players:d};i(t),y(c),E(m),h(e),S(null);return}let t=r.map(e=>{if(a.players.some(a=>a.id===e.id)){let a=e.wins+1,s=e.consecutiveWins||0;return{...e,wins:a,consecutiveWins:s+1,winRate:a/(a+e.losses)}}if(s.players.some(a=>a.id===e.id)){let a=e.losses+1;return{...e,losses:a,consecutiveWins:0,winRate:e.wins/(e.wins+a)}}return e}),l=new Map(t.map(e=>[e.id,e])),n=a.players.map(e=>l.get(e.id)).filter(Boolean),d=[...o,...s.players.map(e=>e.id)],c=n.length>0?n[0].consecutiveWins:0;if(P&&c>=K){if(eg({title:"\xa1Nuevos Campeones!",description:"".concat(a.name," ahora son campeones y descansar\xe1n.")}),S({name:"Campeones",players:n}),d.length<10)eg({variant:"destructive",title:"No hay suficientes jugadores",description:"No hay suficientes jugadores en espera para un partido interino. Los equipos se han vaciado."}),y({name:"Equipo A",players:[]}),E({name:"Equipo B",players:[]}),h(d);else{let e=d.slice(0,10).map(e=>t.find(a=>a.id===e)),a=e.slice(0,5),s=e.slice(5,10);y({name:"Equipo ".concat(a[0].name),players:a}),E({name:"Equipo ".concat(s[0].name),players:s}),h(d.slice(10))}i(t);return}let m=d.slice(0,5);if(m.length<5){eg({variant:"destructive",title:"No hay suficientes jugadores",description:"No hay suficientes retadores. El equipo ganador se queda solo."});let a={name:"Equipo ".concat(n[0].name),players:n};"A"===e?(y(a),E({name:"Equipo B",players:[]})):(E(a),y({name:"Equipo A",players:[]})),h(d)}else{let a=d.slice(5),s=m.map(e=>t.find(a=>a.id===e)),l={name:"Equipo ".concat(s[0].name),players:s},r={name:"Equipo ".concat(n[0].name),players:n};"A"===e?(y(r),E(l)):(y(l),E(r)),h(a)}i(t)};return e?(0,t.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 to-slate-800 text-slate-100 p-2 sm:p-4",children:(0,t.jsxs)("main",{className:"w-full max-w-7xl mx-auto",children:[(0,t.jsx)(G,{open:er,onOpenChange:ec,children:(0,t.jsxs)(Q,{className:"bg-slate-800 border-slate-700",children:[(0,t.jsxs)($,{children:[(0,t.jsx)(ea,{className:"text-amber-400",children:"\xbfDesactivar Regla del Campe\xf3n?"}),(0,t.jsx)(es,{className:"text-slate-300",children:"Esta acci\xf3n disolver\xe1 el equipo campe\xf3n actual y devolver\xe1 a sus jugadores a la lista de espera. \xbfEst\xe1s seguro?"})]}),(0,t.jsxs)(ee,{children:[(0,t.jsx)(el,{className:"border-slate-600 hover:bg-slate-700",onClick:()=>ec(!1),children:"Cancelar"}),(0,t.jsx)(et,{onClick:()=>{Y(!1),A?(h(e=>[...e,...A.players.map(e=>e.id)]),S(null),eg({title:"Regla Desactivada",description:"El equipo campe\xf3n ha sido disuelto y sus jugadores est\xe1n en la lista de espera."})):eg({title:"Regla del Campe\xf3n Desactivada"}),ec(!1)},className:"bg-destructive hover:bg-red-700",children:"S\xed, desactivar"})]})]})}),(0,t.jsxs)("header",{className:"text-center mb-8",children:[(0,t.jsxs)("h1",{className:"font-bold text-5xl md:text-6xl text-sky-400 flex items-center justify-center gap-4",children:[(0,t.jsx)(k.A,{})," Rotaci\xf3n Deportiva"]}),(0,t.jsx)("p",{className:"text-slate-400 mt-2",children:"Gesti\xf3n de equipos para partidos amistosos"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,t.jsxs)("div",{className:"lg:col-span-1 space-y-8",children:[(0,t.jsxs)(c,{className:"bg-slate-800 border-slate-700",children:[(0,t.jsx)(m,{children:(0,t.jsxs)(p,{className:"flex items-center gap-2 text-sky-400",children:[(0,t.jsx)(R.A,{})," A\xf1adir Nuevo Jugador"]})}),(0,t.jsx)(x,{children:(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(f,{placeholder:"Ej., Nombre del Jugador",value:C,onChange:e=>M(e.target.value),onKeyDown:e=>"Enter"===e.key&&eE(),className:"bg-slate-700 border-slate-600 placeholder:text-slate-500"}),(0,t.jsx)(d,{onClick:eE,className:"bg-sky-600 hover:bg-sky-700 text-white",children:"A\xf1adir"})]})})]}),(0,t.jsx)(c,{className:"bg-slate-800 border-slate-700",children:(0,t.jsx)(ei,{type:"single",collapsible:!0,className:"w-full",defaultValue:"item-1",children:(0,t.jsxs)(en,{value:"item-1",className:"border-b-0",children:[(0,t.jsx)(eo,{className:"p-6 hover:no-underline",children:(0,t.jsxs)("div",{className:"flex flex-col items-start w-full",children:[(0,t.jsxs)(p,{className:"flex items-center gap-2 text-sky-400",children:[(0,t.jsx)(q.A,{})," Lista de Espera (",ej.length,")"]}),(0,t.jsx)(u,{className:"text-slate-400 pt-2",children:"Los jugadores se a\xf1aden a los equipos desde aqu\xed."})]})}),(0,t.jsx)(ed,{children:(0,t.jsx)(x,{className:"px-6 pb-6 pt-0 space-y-2 max-h-[400px] overflow-y-auto",children:ej.length>0?ej.map((e,a)=>(0,t.jsx)(eN,{player:e,turn:a+1,onRemove:eA,onAssign:eS,showAssign:!0,onMoveUp:eR,onMoveDown:eq,isFirst:0===a,isLast:a===ej.length-1,isTeamAFull:g.players.length>=5,isTeamBFull:j.players.length>=5},e.id)):(0,t.jsx)("p",{className:"text-slate-500 text-center py-4",children:"No hay jugadores en espera."})})})]})})}),(0,t.jsx)(c,{className:(0,n.cn)("border-slate-700 transition-all",A?"bg-gradient-to-br from-amber-500 to-yellow-400":"bg-slate-800"),children:(0,t.jsx)(ei,{type:"single",collapsible:!0,className:"w-full",children:(0,t.jsxs)(en,{value:"item-1",className:"border-b-0",children:[(0,t.jsx)(eo,{className:"p-6 hover:no-underline",children:A?(0,t.jsxs)("div",{className:"text-white text-left w-full",children:[(0,t.jsxs)(p,{className:"flex items-center gap-2 text-white",children:[(0,t.jsx)(I.A,{className:"h-6 w-6"})," Campe\xf3n Descansando"]}),(0,t.jsxs)(u,{className:"text-amber-100 pt-2",children:["Racha Actual: ",A.players[0].consecutiveWins," victorias. Esperando retador."]})]}):(0,t.jsxs)("div",{className:"flex flex-col items-start w-full",children:[(0,t.jsxs)(p,{className:"flex items-center gap-2 text-sky-400",children:[(0,t.jsx)(T.A,{})," Regla del Campe\xf3n"]}),(0,t.jsx)(u,{className:"text-slate-400 pt-2",children:"Configura las reglas para coronar a un equipo campe\xf3n."})]})}),(0,t.jsx)(ed,{children:A?(0,t.jsxs)(x,{className:"px-6 pb-6 pt-0 text-white",children:[(0,t.jsx)("div",{className:"space-y-2",children:A.players.map(e=>(0,t.jsx)(eN,{player:e,onRemove:ek,isChampion:!0},e.id))}),(0,t.jsx)(d,{className:"w-full mt-6 bg-indigo-600 hover:bg-indigo-700 text-white border-none",onClick:()=>{A&&(h(e=>[...e,...A.players.map(e=>e.id)]),S(null))},children:"Devolver a la Lista de Espera"})]}):(0,t.jsxs)(x,{className:"px-6 pb-6 pt-0",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,t.jsx)(v,{id:"champion-rule",checked:P,disabled:!P&&ej.length<10,onCheckedChange:e=>{if(e){if(ej.length<10)return void eg({variant:"destructive",title:"No se puede activar",description:"Se necesitan al menos 10 jugadores en espera para activar la Regla del Campe\xf3n."});Y(!0),eg({title:"Regla del Campe\xf3n Activada"})}else A?ec(!0):(Y(!1),eg({title:"Regla del Campe\xf3n Desactivada"}))}}),(0,t.jsx)(N,{htmlFor:"champion-rule",children:P?"Regla activada":"Regla desactivada"})]}),(0,t.jsx)("p",{className:"text-xs mb-4 text-slate-400",children:P?"El equipo campe\xf3n descansar\xe1.":"Se activa con 10 o m\xe1s jugadores en espera."}),(0,t.jsxs)("div",{className:"flex items-center gap-2 my-4",children:[(0,t.jsx)(N,{htmlFor:"wins-to-champion",children:"Victorias para ser campe\\xf3n:"}),(0,t.jsx)(f,{id:"wins-to-champion",type:"number",value:K,onChange:e=>X(Math.max(1,Number(e.target.value))),className:"w-20 bg-slate-700 border-slate-600 text-white",min:"1"})]}),(0,t.jsx)(b,{className:"bg-slate-700"}),(0,t.jsx)("p",{className:"text-center py-4 text-slate-500 mt-2",children:"No hay un equipo campe\xf3n descansando."})]})})]})})})]}),(0,t.jsx)("div",{className:"lg:col-span-2 space-y-8",children:(0,t.jsxs)(c,{className:"bg-slate-800/50 border-slate-700",children:[(0,t.jsxs)(m,{children:[(0,t.jsx)(p,{className:"text-3xl text-sky-400",children:A?"Partido Interino":"Equipos Actuales"}),A&&(0,t.jsxs)(u,{className:"text-yellow-400",children:["El ganador de este partido se enfrentar\xe1 al campe\xf3n: ",A.name]})]}),(0,t.jsxs)(x,{className:"space-y-6",children:[(0,t.jsxs)(em,{defaultValue:"team-a",className:"w-full",children:[(0,t.jsxs)(ep,{className:"grid w-full grid-cols-2",children:[(0,t.jsx)(eu,{value:"team-a",children:g.name}),(0,t.jsx)(eu,{value:"team-b",children:j.name})]}),(0,t.jsx)(ex,{value:"team-a",children:(0,t.jsx)(ey,{team:g,onRemovePlayer:eC})}),(0,t.jsx)(ex,{value:"team-b",children:(0,t.jsx)(ey,{team:j,onRemovePlayer:eC})})]}),(0,t.jsx)(b,{className:"bg-slate-700"}),(0,t.jsxs)("div",{className:"text-center space-y-4",children:[(0,t.jsx)("h3",{className:"text-2xl text-sky-400",children:"Registrar Resultado del Partido"}),(0,t.jsxs)("div",{className:"flex flex-wrap justify-center gap-4",children:[(0,t.jsxs)(d,{size:"lg",className:"bg-emerald-600 hover:bg-emerald-700 text-white border-none",onClick:()=>eI("A"),disabled:g.players.length<5||j.players.length<5,children:[(0,t.jsx)(I.A,{className:"mr-2 h-4 w-4"})," Gan\xf3 ",g.name]}),(0,t.jsxs)(d,{size:"lg",className:"bg-emerald-600 hover:bg-emerald-700 text-white border-none",onClick:()=>eI("B"),disabled:g.players.length<5||j.players.length<5,children:[(0,t.jsx)(I.A,{className:"mr-2 h-4 w-4"})," Gan\xf3 ",j.name]})]}),(0,t.jsx)("div",{className:"pt-4",children:(0,t.jsxs)(c,{className:"bg-slate-800 border-slate-700 max-w-sm mx-auto",children:[(0,t.jsx)(m,{children:(0,t.jsx)(p,{className:"flex items-center gap-2 text-sky-400",children:"Acciones del D\xeda"})}),(0,t.jsx)(x,{children:(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row gap-2",children:[(0,t.jsxs)(B,{open:L,onOpenChange:J,children:[(0,t.jsx)(z,{asChild:!0,children:(0,t.jsxs)(d,{className:"w-full bg-indigo-600 hover:bg-indigo-700 text-white",children:[(0,t.jsx)(O.A,{className:"mr-2 h-4 w-4"}),"Finalizar el D\xeda y Ver Resumen"]})}),(0,t.jsxs)(W,{ref:ef,className:"max-w-md bg-slate-800 border-slate-700 text-slate-100",children:[(0,t.jsxs)(F,{children:[(0,t.jsx)(U,{className:"text-sky-400 text-2xl",children:"Resumen del D\xeda"}),(0,t.jsx)(H,{className:"text-slate-400",children:"Estad\xedsticas de los jugadores de hoy. \xa1Buen juego a todos!"})]}),(0,t.jsx)(eh,{className:"h-[60vh]",children:(0,t.jsx)("div",{className:"space-y-3 pr-4",children:eb.length>0?eb.map(e=>(0,t.jsxs)("div",{className:"flex justify-between items-center bg-slate-700 p-3 rounded-lg",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-bold text-sky-400",children:e.name}),(0,t.jsxs)("p",{className:"text-sm text-slate-300",children:["Juegos Jugados: ",e.wins+e.losses]})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsxs)("p",{className:"font-semibold text-emerald-400",children:["Victorias: ",e.wins]}),(0,t.jsxs)("p",{className:"text-sm text-slate-400",children:["Derrotas: ",e.losses]})]})]},e.id)):(0,t.jsx)("p",{className:"text-slate-500 text-center py-8",children:"No se han registrado jugadores hoy."})})}),(0,t.jsxs)(V,{id:"summary-dialog-footer",className:"sm:justify-between gap-2 mt-4 flex-col-reverse sm:flex-row",children:[(0,t.jsxs)(G,{children:[(0,t.jsx)(Z,{asChild:!0,children:(0,t.jsxs)(d,{variant:"destructive",className:"w-full sm:w-auto",children:[(0,t.jsx)(D.A,{className:"mr-2 h-4 w-4"}),"Reiniciar Todo"]})}),(0,t.jsxs)(Q,{className:"bg-slate-800 border-slate-700",children:[(0,t.jsxs)($,{children:[(0,t.jsx)(ea,{className:"text-amber-400",children:"\xbfEst\xe1s seguro?"}),(0,t.jsx)(es,{className:"text-slate-300",children:"Esta acci\xf3n es irreversible. Se borrar\xe1n todos los jugadores, equipos y estad\xedsticas guardadas."})]}),(0,t.jsxs)(ee,{children:[(0,t.jsx)(el,{className:"border-slate-600 hover:bg-slate-700",children:"Cancelar"}),(0,t.jsx)(et,{onClick:()=>{i([]),h([]),y({name:"Equipo A",players:[]}),E({name:"Equipo B",players:[]}),S(null),M(""),localStorage.removeItem(ev.PLAYERS),localStorage.removeItem(ev.WAITING_LIST),localStorage.removeItem(ev.TEAM_A),localStorage.removeItem(ev.TEAM_B),localStorage.removeItem(ev.CHAMPIONS),J(!1),eg({title:"D\xeda Finalizado",description:"Todos los datos han sido reiniciados. \xa1Hasta la pr\xf3xima!"})},className:"bg-destructive hover:bg-red-700",children:"S\xed, reiniciar"})]})]})]}),(0,t.jsxs)("div",{className:"flex flex-col-reverse sm:flex-row gap-2",children:[(0,t.jsxs)(d,{onClick:ew,className:"w-full sm:w-auto bg-sky-600 hover:bg-sky-700 text-white",children:[(0,t.jsx)(_.A,{className:"mr-2 h-4 w-4"}),"Descargar JPG"]}),(0,t.jsx)(d,{type:"button",variant:"secondary",onClick:()=>J(!1),children:"Cerrar"})]})]})]})]}),(0,t.jsxs)(G,{children:[(0,t.jsx)(Z,{asChild:!0,children:(0,t.jsxs)(d,{variant:"outline",className:"w-full border-slate-600 hover:bg-slate-700",children:[(0,t.jsx)(D.A,{className:"mr-2 h-4 w-4"}),"Enviar todos a espera"]})}),(0,t.jsxs)(Q,{className:"bg-slate-800 border-slate-700",children:[(0,t.jsxs)($,{children:[(0,t.jsx)(ea,{className:"text-amber-400",children:"\xbfEst\xe1s seguro?"}),(0,t.jsx)(es,{className:"text-slate-300",children:"Esta acci\xf3n mover\xe1 a todos los jugadores de los equipos y campeones a la lista de espera."})]}),(0,t.jsxs)(ee,{children:[(0,t.jsx)(el,{className:"border-slate-600 hover:bg-slate-700",children:"Cancelar"}),(0,t.jsx)(et,{onClick:()=>{let e=new Set([...g.players.map(e=>e.id),...j.players.map(e=>e.id),...A?A.players.map(e=>e.id):[]]),a=r.filter(a=>e.has(a.id)).map(e=>e.id);h(e=>[...e,...a.filter(a=>!e.includes(a))]),y({name:"Equipo A",players:[]}),E({name:"Equipo B",players:[]}),S(null),eg({title:"Jugadores en Espera",description:"Todos los jugadores en equipos activos han sido movidos a la lista de espera."})},className:"bg-destructive hover:bg-red-700",children:"S\xed, enviar a todos"})]})]})]})]})})]})})]})]})]})})]})]})}):(0,t.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 to-slate-800 text-slate-100 p-2 sm:p-4 flex items-center justify-center",children:(0,t.jsx)("div",{className:"text-center",children:(0,t.jsx)("h1",{className:"font-bold text-5xl md:text-6xl text-sky-400",children:"Cargando..."})})})}},7481:(e,a,s)=>{"use strict";s.d(a,{dj:()=>p});var t=s(2115);let l=0,r=new Map,i=e=>{if(r.has(e))return;let a=setTimeout(()=>{r.delete(e),c({type:"REMOVE_TOAST",toastId:e})},1e6);r.set(e,a)},n=(e,a)=>{switch(a.type){case"ADD_TOAST":return{...e,toasts:[a.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===a.toast.id?{...e,...a.toast}:e)};case"DISMISS_TOAST":{let{toastId:s}=a;return s?i(s):e.toasts.forEach(e=>{i(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===a.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==a.toastId)}}},o=[],d={toasts:[]};function c(e){d=n(d,e),o.forEach(e=>{e(d)})}function m(e){let{...a}=e,s=(l=(l+1)%Number.MAX_SAFE_INTEGER).toString(),t=()=>c({type:"DISMISS_TOAST",toastId:s});return c({type:"ADD_TOAST",toast:{...a,id:s,open:!0,onOpenChange:e=>{e||t()}}}),{id:s,dismiss:t,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:s}})}}function p(){let[e,a]=t.useState(d);return t.useEffect(()=>(o.push(a),()=>{let e=o.indexOf(a);e>-1&&o.splice(e,1)}),[e]),{...e,toast:m,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}},9434:(e,a,s)=>{"use strict";s.d(a,{cn:()=>r});var t=s(2596),l=s(9688);function r(){for(var e=arguments.length,a=Array(e),s=0;s<e;s++)a[s]=arguments[s];return(0,l.QP)((0,t.$)(a))}}},e=>{var a=a=>e(e.s=a);e.O(0,[222,777,441,721,358],()=>a(4160)),_N_E=e.O()}]);