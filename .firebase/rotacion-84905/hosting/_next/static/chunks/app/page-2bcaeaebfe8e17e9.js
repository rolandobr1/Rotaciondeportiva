(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{3306:(e,a,s)=>{"use strict";s.d(a,{RotacionDeportiva:()=>eo});var t=s(5155),l=s(2115),r=s(4253),i=s(2085),n=s(9434);let o=(0,i.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=l.forwardRef((e,a)=>{let{className:s,variant:l,size:i,asChild:d=!1,...c}=e,m=d?r.DX:"button";return(0,t.jsx)(m,{className:(0,n.cn)(o({variant:l,size:i,className:s})),ref:a,...c})});d.displayName="Button";let c=l.forwardRef((e,a)=>{let{className:s,...l}=e;return(0,t.jsx)("div",{ref:a,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",s),...l})});c.displayName="Card";let m=l.forwardRef((e,a)=>{let{className:s,...l}=e;return(0,t.jsx)("div",{ref:a,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",s),...l})});m.displayName="CardHeader";let p=l.forwardRef((e,a)=>{let{className:s,...l}=e;return(0,t.jsx)("div",{ref:a,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",s),...l})});p.displayName="CardTitle";let u=l.forwardRef((e,a)=>{let{className:s,...l}=e;return(0,t.jsx)("div",{ref:a,className:(0,n.cn)("text-sm text-muted-foreground",s),...l})});u.displayName="CardDescription";let x=l.forwardRef((e,a)=>{let{className:s,...l}=e;return(0,t.jsx)("div",{ref:a,className:(0,n.cn)("p-6 pt-0",s),...l})});x.displayName="CardContent",l.forwardRef((e,a)=>{let{className:s,...l}=e;return(0,t.jsx)("div",{ref:a,className:(0,n.cn)("flex items-center p-6 pt-0",s),...l})}).displayName="CardFooter";let f=l.forwardRef((e,a)=>{let{className:s,type:l,...r}=e;return(0,t.jsx)("input",{type:l,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:a,...r})});f.displayName="Input";var h=s(968);let g=(0,i.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),y=l.forwardRef((e,a)=>{let{className:s,...l}=e;return(0,t.jsx)(h.b,{ref:a,className:(0,n.cn)(g(),s),...l})});y.displayName=h.b.displayName;var N=s(8611);let j=l.forwardRef((e,a)=>{let{className:s,...l}=e;return(0,t.jsx)(N.bL,{className:(0,n.cn)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",s),...l,ref:a,children:(0,t.jsx)(N.zi,{className:(0,n.cn)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})})});j.displayName=N.bL.displayName;var v=s(7489);let b=l.forwardRef((e,a)=>{let{className:s,orientation:l="horizontal",decorative:r=!0,...i}=e;return(0,t.jsx)(v.b,{ref:a,decorative:r,orientation:l,className:(0,n.cn)("shrink-0 bg-border","horizontal"===l?"h-[1px] w-full":"h-full w-[1px]",s),...i})});b.displayName=v.b.displayName;var w=s(7481),A=s(7381),E=s(9556),S=s(7223),k=s(1816),I=s(8553),C=s(8046),R=s(1545),T=s(7554),q=s(7390),O=s(286),_=s(5268),D=s(4913),M=s(7003),z=s(5318);let J=M.bL,L=M.l9,P=M.ZL;M.bm;let B=l.forwardRef((e,a)=>{let{className:s,...l}=e;return(0,t.jsx)(M.hJ,{ref:a,className:(0,n.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...l})});B.displayName=M.hJ.displayName;let W=l.forwardRef((e,a)=>{let{className:s,children:l,...r}=e;return(0,t.jsxs)(P,{children:[(0,t.jsx)(B,{}),(0,t.jsxs)(M.UC,{ref:a,className:(0,n.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...r,children:[l,(0,t.jsxs)(M.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,t.jsx)(z.A,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});W.displayName=M.UC.displayName;let F=e=>{let{className:a,...s}=e;return(0,t.jsx)("div",{className:(0,n.cn)("flex flex-col space-y-1.5 text-center sm:text-left",a),...s})};F.displayName="DialogHeader";let V=e=>{let{className:a,...s}=e;return(0,t.jsx)("div",{className:(0,n.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",a),...s})};V.displayName="DialogFooter";let H=l.forwardRef((e,a)=>{let{className:s,...l}=e;return(0,t.jsx)(M.hE,{ref:a,className:(0,n.cn)("text-lg font-semibold leading-none tracking-tight",s),...l})});H.displayName=M.hE.displayName;let G=l.forwardRef((e,a)=>{let{className:s,...l}=e;return(0,t.jsx)(M.VY,{ref:a,className:(0,n.cn)("text-sm text-muted-foreground",s),...l})});G.displayName=M.VY.displayName;var U=s(2278);let Y=U.bL,Z=U.l9,X=U.ZL,K=l.forwardRef((e,a)=>{let{className:s,...l}=e;return(0,t.jsx)(U.hJ,{className:(0,n.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...l,ref:a})});K.displayName=U.hJ.displayName;let Q=l.forwardRef((e,a)=>{let{className:s,...l}=e;return(0,t.jsxs)(X,{children:[(0,t.jsx)(K,{}),(0,t.jsx)(U.UC,{ref:a,className:(0,n.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...l})]})});Q.displayName=U.UC.displayName;let $=e=>{let{className:a,...s}=e;return(0,t.jsx)("div",{className:(0,n.cn)("flex flex-col space-y-2 text-center sm:text-left",a),...s})};$.displayName="AlertDialogHeader";let ee=e=>{let{className:a,...s}=e;return(0,t.jsx)("div",{className:(0,n.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",a),...s})};ee.displayName="AlertDialogFooter";let ea=l.forwardRef((e,a)=>{let{className:s,...l}=e;return(0,t.jsx)(U.hE,{ref:a,className:(0,n.cn)("text-lg font-semibold",s),...l})});ea.displayName=U.hE.displayName;let es=l.forwardRef((e,a)=>{let{className:s,...l}=e;return(0,t.jsx)(U.VY,{ref:a,className:(0,n.cn)("text-sm text-muted-foreground",s),...l})});es.displayName=U.VY.displayName;let et=l.forwardRef((e,a)=>{let{className:s,...l}=e;return(0,t.jsx)(U.rc,{ref:a,className:(0,n.cn)(o(),s),...l})});et.displayName=U.rc.displayName;let el=l.forwardRef((e,a)=>{let{className:s,...l}=e;return(0,t.jsx)(U.ZD,{ref:a,className:(0,n.cn)(o({variant:"outline"}),"mt-2 sm:mt-0",s),...l})});el.displayName=U.ZD.displayName;var er=s(8064);let ei=e=>{let{player:a,onRemove:s,onAssign:l,showAssign:r,isChampion:i,turn:o,onMoveUp:c,onMoveDown:m,isFirst:p,isLast:u,isTeamAFull:x,isTeamBFull:f}=e;return(0,t.jsxs)("div",{className:(0,n.cn)("relative flex items-center justify-between p-3 rounded-lg shadow-sm transition-all duration-300 hover:shadow-md",i?"bg-amber-500":"bg-slate-700"),children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[c&&m&&(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsx)(d,{size:"icon",variant:"ghost",className:"h-5 w-5 p-0 text-slate-400 hover:text-white disabled:opacity-30",onClick:()=>c(a.id),disabled:p,children:(0,t.jsx)(A.A,{className:"h-4 w-4"})}),(0,t.jsx)(d,{size:"icon",variant:"ghost",className:"h-5 w-5 p-0 text-slate-400 hover:text-white disabled:opacity-30",onClick:()=>m(a.id),disabled:u,children:(0,t.jsx)(E.A,{className:"h-4 w-4"})})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("p",{className:(0,n.cn)("font-bold",i?"text-black":"text-sky-400"),children:[o&&(0,t.jsxs)("span",{className:"mr-2 text-slate-400 font-normal",children:[o,"."]}),a.name]}),(0,t.jsxs)("p",{className:(0,n.cn)("text-xs",i?"text-slate-800":"text-slate-400"),children:["V/D: ",a.wins,"/",a.losses," | Tasa de Victorias: ",(100*a.winRate).toFixed(0),"% | Racha: ",(0,t.jsx)("span",{className:(0,n.cn)("font-bold",a.consecutiveWins>0?i?"text-white":"text-amber-400":""),children:a.consecutiveWins})]})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[r&&l&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(d,{size:"sm",onClick:()=>l(a.id,"A"),className:"h-7 w-7 p-0 bg-sky-700 hover:bg-sky-600 text-white border-none disabled:bg-slate-600 disabled:opacity-50",disabled:x,children:"A"}),(0,t.jsx)(d,{size:"sm",onClick:()=>l(a.id,"B"),className:"h-7 w-7 p-0 bg-teal-700 hover:bg-teal-600 text-white border-none disabled:bg-slate-600 disabled:opacity-50",disabled:f,children:"B"})]}),s&&(0,t.jsx)(d,{size:"icon",variant:"ghost",className:(0,n.cn)("h-7 w-7",i?"text-black hover:text-red-900":"text-slate-400 hover:text-red-500"),onClick:()=>s(a.id),children:(0,t.jsx)(S.A,{className:"h-4 w-4"})})]})]})},en=e=>{let{team:a,onRemovePlayer:s}=e,r=(0,l.useMemo)(()=>0===a.players.length?0:a.players.reduce((e,a)=>e+a.winRate,0)/a.players.length,[a.players]);return(0,t.jsxs)(c,{className:"flex-1 min-w-[280px] bg-slate-800/80 border-slate-700",children:[(0,t.jsxs)(m,{children:[(0,t.jsxs)(p,{className:"flex items-center gap-2 text-2xl text-sky-400",children:[(0,t.jsx)(k.A,{})," ",a.name]}),(0,t.jsxs)(u,{className:"text-slate-400",children:["Tasa de Vic. Prom.: ",(100*r).toFixed(0),"%"]})]}),(0,t.jsx)(x,{className:"space-y-2",children:a.players.length>0?a.players.map(e=>(0,t.jsx)(ei,{player:e,onRemove:()=>s(e.id)},e.id)):(0,t.jsx)("div",{className:"text-center text-slate-500 py-8",children:"A\xf1ade jugadores a este equipo"})})]})};function eo(){let[e,a]=(0,l.useState)(!1),[s,r]=(0,l.useState)([]),[i,o]=(0,l.useState)([]),[h,g]=(0,l.useState)({name:"Equipo A",players:[]}),[N,v]=(0,l.useState)({name:"Equipo B",players:[]}),[A,E]=(0,l.useState)(null),[S,k]=(0,l.useState)(""),[M,z]=(0,l.useState)(!1),[P,B]=(0,l.useState)(!1),[U,X]=(0,l.useState)(2),K=(0,l.useRef)(null),{toast:eo}=(0,w.dj)(),ed=(0,l.useMemo)(()=>({PLAYERS:"rotacionDeportiva.players",WAITING_LIST:"rotacionDeportiva.waitingListIds",TEAM_A:"rotacionDeportiva.teamA",TEAM_B:"rotacionDeportiva.teamB",CHAMPIONS:"rotacionDeportiva.championsTeam",WINS_TO_CHAMPION:"rotacionDeportiva.winsToChampion"}),[]);(0,l.useEffect)(()=>{try{let e=localStorage.getItem(ed.PLAYERS);e&&r(JSON.parse(e));let a=localStorage.getItem(ed.WAITING_LIST);a&&o(JSON.parse(a));let s=localStorage.getItem(ed.TEAM_A);s&&g(JSON.parse(s));let t=localStorage.getItem(ed.TEAM_B);t&&v(JSON.parse(t));let l=localStorage.getItem(ed.CHAMPIONS);l&&"null"!==l&&E(JSON.parse(l));let i=localStorage.getItem(ed.WINS_TO_CHAMPION);i&&X(JSON.parse(i))}catch(e){console.error("Error al cargar datos desde localStorage",e),eo({variant:"destructive",title:"Error al cargar datos",description:"No se pudieron cargar los datos guardados. Se empezar\xe1 de cero."})}a(!0)},[ed,eo]),(0,l.useEffect)(()=>{if(e)try{localStorage.setItem(ed.PLAYERS,JSON.stringify(s)),localStorage.setItem(ed.WAITING_LIST,JSON.stringify(i)),localStorage.setItem(ed.TEAM_A,JSON.stringify(h)),localStorage.setItem(ed.TEAM_B,JSON.stringify(N)),localStorage.setItem(ed.CHAMPIONS,JSON.stringify(A)),localStorage.setItem(ed.WINS_TO_CHAMPION,JSON.stringify(U))}catch(e){console.error("Error al guardar datos en localStorage",e)}},[s,i,h,N,A,U,e,ed]);let ec=(0,l.useMemo)(()=>{let e=new Map(s.map(e=>[e.id,e]));return i.map(a=>e.get(a)).filter(Boolean)},[s,i]),em=(0,l.useMemo)(()=>[...s].sort((e,a)=>a.wins-e.wins),[s]);(0,l.useEffect)(()=>{B(ec.length>=10)},[ec.length]);let ep=()=>{let e=S.trim();if(""===e){let a=1,t="Jugador ".concat(a);for(;s.some(e=>e.name===t);)a++,t="Jugador ".concat(a);e=t}else if(s.some(a=>a.name.toLowerCase()===e.toLowerCase()))return void eo({variant:"destructive",title:"Nombre duplicado",description:'Ya existe un jugador con el nombre "'.concat(e,'".')});let a={id:crypto.randomUUID(),name:e,wins:0,losses:0,winRate:0,consecutiveWins:0};r(e=>[...e,a]),o(e=>[...e,a.id]),k(""),eo({title:"Jugador A\xf1adido",description:"".concat(a.name," est\xe1 ahora en la lista de espera.")})},eu=e=>{r(a=>a.filter(a=>a.id!==e)),o(a=>a.filter(a=>a!==e)),g(a=>{let s=a.players.filter(a=>a.id!==e),t=s.length>0?"Equipo ".concat(s[0].name):"Equipo A";return{...a,players:s,name:t}}),v(a=>{let s=a.players.filter(a=>a.id!==e),t=s.length>0?"Equipo ".concat(s[0].name):"Equipo B";return{...a,players:s,name:t}}),E(a=>{if(!a)return null;let s=a.players.filter(a=>a.id!==e);if(0===s.length)return null;let t=s.length>0?"Equipo ".concat(s[0].name):"Campeones";return{...a,players:s,name:t}})},ex=(e,a)=>{let t=s.find(a=>a.id===e);if(t)if("A"===a){if(h.players.length>=5)return void eo({variant:"destructive",title:"Equipo A ya est\xe1 lleno."});let a=[...h.players,t],l=i.filter(a=>a!==e);if(g({players:a,name:"Equipo ".concat(a[0].name)}),5===a.length&&0===N.players.length&&l.length>=5){let e=l.slice(0,5).map(e=>s.find(a=>a.id===e));v({players:e,name:"Equipo ".concat(e[0].name)}),o(l.slice(5)),eo({title:"Equipo B auto-completado",description:"Los 5 siguientes jugadores han formado el equipo."})}else o(l)}else{if(N.players.length>=5)return void eo({variant:"destructive",title:"Equipo B ya est\xe1 lleno."});let a=[...N.players,t],l=i.filter(a=>a!==e);if(v({players:a,name:"Equipo ".concat(a[0].name)}),5===a.length&&0===h.players.length&&l.length>=5){let e=l.slice(0,5).map(e=>s.find(a=>a.id===e));g({players:e,name:"Equipo ".concat(e[0].name)}),o(l.slice(5)),eo({title:"Equipo A auto-completado",description:"Los 5 siguientes jugadores han formado el equipo."})}else o(l)}},ef=e=>{let a=s.find(a=>a.id===e);if(!a)return;let t=h.players.find(a=>a.id===e)?"A":N.players.find(a=>a.id===e)?"B":null;if(!t)return;let l=ec.length>0?ec[0]:null;"A"===t?g(a=>{let s=a.players.filter(a=>a.id!==e);l&&s.push(l);let t=s.length>0?"Equipo ".concat(s[0].name):"Equipo A";return{...a,players:s,name:t}}):v(a=>{let s=a.players.filter(a=>a.id!==e);l&&s.push(l);let t=s.length>0?"Equipo ".concat(s[0].name):"Equipo B";return{...a,players:s,name:t}}),o(a=>[...l?a.slice(1):a,e]),l?eo({title:"Rotaci\xf3n Autom\xe1tica",description:"".concat(a.name," vuelve a la cola. ").concat(l.name," entra al juego.")}):eo({title:"Jugador en Espera",description:"".concat(a.name," ha vuelto a la lista de espera.")})},eh=e=>{if(!A)return;let a=A.players.find(a=>a.id===e);if(!a)return;let s=ec.length>0?ec[0]:null,t=A.players.filter(a=>a.id!==e),l=i;s?(t.push(s),l=l.slice(1),eo({title:"Rotaci\xf3n de Campe\xf3n",description:"".concat(a.name," vuelve a la cola. ").concat(s.name," se une a los campeones.")})):eo({title:"Campe\xf3n en Espera",description:"".concat(a.name," ha vuelto a la lista de espera. El equipo campe\xf3n est\xe1 incompleto.")}),o([...l,e]),0===t.length?E(null):E({...A,players:t})},eg=e=>{o(a=>{let s=a.indexOf(e);if(s>0){let e=[...a];return[e[s],e[s-1]]=[e[s-1],e[s]],e}return a})},ey=e=>{o(a=>{let s=a.indexOf(e);if(s<a.length-1&&-1!==s){let e=[...a];return[e[s],e[s+1]]=[e[s+1],e[s]],e}return a})},eN=e=>{var a;let t="A"===e?h:N,l="A"===e?N:h;if(t.players.length<5||l.players.length<5)return void eo({variant:"destructive",title:"Equipos incompletos",description:"Ambos equipos deben tener 5 jugadores."});if(A){eo({title:"Partido Interino Finalizado",description:"El ".concat(t.name," se enfrentar\xe1 al campe\xf3n.")});let e=[...i,...l.players.map(e=>e.id)],a=s.map(e=>{if(l.players.some(a=>a.id===e.id)){let a=e.losses+1;return{...e,losses:a,consecutiveWins:0,winRate:e.wins/(e.wins+a)}}if(t.players.some(a=>a.id===e.id)){let a=e.wins+1,s=e.consecutiveWins||0;return{...e,wins:a,consecutiveWins:s+1,winRate:a/(a+e.losses)}}return A.players.some(a=>a.id===e.id)?{...e,consecutiveWins:0}:e}),n=a.filter(e=>A.players.some(a=>a.id===e.id)),d=a.filter(e=>t.players.some(a=>a.id===e.id)),c={name:"Equipo ".concat(n[0].name),players:n},m={name:"Equipo ".concat(d[0].name),players:d};r(a),g(c),v(m),o(e),E(null);return}null==(a=t.players[0])||a.consecutiveWins;let n=s.map(e=>{if(t.players.some(a=>a.id===e.id)){let a=e.wins+1,s=e.consecutiveWins||0;return{...e,wins:a,consecutiveWins:s+1,winRate:a/(a+e.losses)}}if(l.players.some(a=>a.id===e.id)){let a=e.losses+1;return{...e,losses:a,consecutiveWins:0,winRate:e.wins/(e.wins+a)}}return e}),d=[...i,...l.players.map(e=>e.id)],c=n.filter(e=>t.players.some(a=>a.id===e.id)),m=c[0].consecutiveWins;if(P&&m>=U){if(eo({title:"\xa1Nuevos Campeones!",description:"".concat(t.name," ahora son campeones y descansar\xe1n.")}),E({name:"Campeones",players:c}),d.length<10)eo({variant:"destructive",title:"No hay suficientes jugadores",description:"No hay suficientes jugadores en espera para un partido interino. Los equipos se han vaciado."}),g({name:"Equipo A",players:[]}),v({name:"Equipo B",players:[]}),o(d);else{let e=d.slice(0,10).map(e=>n.find(a=>a.id===e)),a=e.slice(0,5),s=e.slice(5,10);g({name:"Equipo ".concat(a[0].name),players:a}),v({name:"Equipo ".concat(s[0].name),players:s}),o(d.slice(10))}r(n);return}let p=d.slice(0,5);if(p.length<5){eo({variant:"destructive",title:"No hay suficientes jugadores",description:"No hay suficientes retadores. El equipo ganador se queda solo."});let a=n.filter(e=>t.players.some(a=>a.id===e.id)),s={name:"Equipo ".concat(a[0].name),players:a};"A"===e?(g(s),v({name:"Equipo B",players:[]})):(v(s),g({name:"Equipo A",players:[]})),o(d)}else{let a=d.slice(5),s=p.map(e=>n.find(a=>a.id===e)),l={name:"Equipo ".concat(s[0].name),players:s},r=n.filter(e=>t.players.some(a=>a.id===e.id)),i={name:"Equipo ".concat(r[0].name),players:r};"A"===e?(g(i),v(l)):(g(l),v(i)),o(a)}r(n)};return e?(0,t.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 to-slate-800 text-slate-100 p-4 md:p-8",children:(0,t.jsxs)("main",{className:"container mx-auto",children:[(0,t.jsxs)("header",{className:"text-center mb-8",children:[(0,t.jsxs)("h1",{className:"font-bold text-5xl md:text-6xl text-sky-400 flex items-center justify-center gap-4",children:[(0,t.jsx)(I.A,{})," Rotaci\xf3n Deportiva"]}),(0,t.jsx)("p",{className:"text-slate-400 mt-2",children:"Gesti\xf3n de equipos para partidos amistosos"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,t.jsxs)("div",{className:"lg:col-span-1 space-y-8",children:[(0,t.jsxs)(c,{className:"bg-slate-800 border-slate-700",children:[(0,t.jsx)(m,{children:(0,t.jsxs)(p,{className:"flex items-center gap-2 text-sky-400",children:[(0,t.jsx)(C.A,{})," A\xf1adir Nuevo Jugador"]})}),(0,t.jsx)(x,{children:(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(f,{placeholder:"Ej., Nombre del Jugador",value:S,onChange:e=>k(e.target.value),onKeyDown:e=>"Enter"===e.key&&ep(),className:"bg-slate-700 border-slate-600 placeholder:text-slate-500"}),(0,t.jsx)(d,{onClick:ep,className:"bg-sky-600 hover:bg-sky-700 text-white",children:"A\xf1adir"})]})})]}),(0,t.jsxs)(c,{className:"bg-slate-800 border-slate-700",children:[(0,t.jsx)(m,{children:(0,t.jsx)(p,{className:"flex items-center gap-2 text-sky-400",children:"Acciones del D\xeda"})}),(0,t.jsx)(x,{children:(0,t.jsxs)(J,{open:M,onOpenChange:z,children:[(0,t.jsx)(L,{asChild:!0,children:(0,t.jsxs)(d,{className:"w-full bg-indigo-600 hover:bg-indigo-700 text-white",children:[(0,t.jsx)(R.A,{className:"mr-2 h-4 w-4"}),"Finalizar el D\xeda y Ver Resumen"]})}),(0,t.jsxs)(W,{ref:K,className:"max-w-md bg-slate-800 border-slate-700 text-slate-100",children:[(0,t.jsxs)(F,{children:[(0,t.jsx)(H,{className:"text-sky-400 text-2xl",children:"Resumen del D\xeda"}),(0,t.jsx)(G,{className:"text-slate-400",children:"Estad\xedsticas de los jugadores de hoy. \xa1Buen juego a todos!"})]}),(0,t.jsx)("div",{className:"max-h-[60vh] overflow-y-auto space-y-3 pr-4",children:em.length>0?em.map(e=>(0,t.jsxs)("div",{className:"flex justify-between items-center bg-slate-700 p-3 rounded-lg",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-bold text-sky-400",children:e.name}),(0,t.jsxs)("p",{className:"text-sm text-slate-300",children:["Juegos Jugados: ",e.wins+e.losses]})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsxs)("p",{className:"font-semibold text-emerald-400",children:["Victorias: ",e.wins]}),(0,t.jsxs)("p",{className:"text-sm text-slate-400",children:["Derrotas: ",e.losses]})]})]},e.id)):(0,t.jsx)("p",{className:"text-slate-500 text-center py-8",children:"No se han registrado jugadores hoy."})}),(0,t.jsxs)(V,{id:"summary-dialog-footer",className:"sm:justify-between gap-2 mt-4 flex-col-reverse sm:flex-row",children:[(0,t.jsxs)(Y,{children:[(0,t.jsx)(Z,{asChild:!0,children:(0,t.jsxs)(d,{variant:"destructive",className:"w-full sm:w-auto",children:[(0,t.jsx)(T.A,{className:"mr-2 h-4 w-4"}),"Reiniciar Todo"]})}),(0,t.jsxs)(Q,{className:"bg-slate-800 border-slate-700",children:[(0,t.jsxs)($,{children:[(0,t.jsx)(ea,{className:"text-amber-400",children:"\xbfEst\xe1s seguro?"}),(0,t.jsx)(es,{className:"text-slate-300",children:"Esta acci\xf3n es irreversible. Se borrar\xe1n todos los jugadores, equipos y estad\xedsticas guardadas."})]}),(0,t.jsxs)(ee,{children:[(0,t.jsx)(el,{className:"border-slate-600 hover:bg-slate-700",children:"Cancelar"}),(0,t.jsx)(et,{onClick:()=>{r([]),o([]),g({name:"Equipo A",players:[]}),v({name:"Equipo B",players:[]}),E(null),k(""),localStorage.removeItem(ed.PLAYERS),localStorage.removeItem(ed.WAITING_LIST),localStorage.removeItem(ed.TEAM_A),localStorage.removeItem(ed.TEAM_B),localStorage.removeItem(ed.CHAMPIONS),z(!1),eo({title:"D\xeda Finalizado",description:"Todos los datos han sido reiniciados. \xa1Hasta la pr\xf3xima!"})},className:"bg-destructive hover:bg-red-700",children:"S\xed, reiniciar"})]})]})]}),(0,t.jsxs)("div",{className:"flex flex-col-reverse sm:flex-row gap-2",children:[(0,t.jsxs)(d,{onClick:()=>{null!==K.current&&(0,er.gO)(K.current,{quality:.95,filter:e=>"summary-dialog-footer"!==e.id,backgroundColor:"#1e293b"}).then(e=>{let a=document.createElement("a");a.download="resumen-del-dia.jpg",a.href=e,a.click(),a.remove()}).catch(e=>{console.error("oops, something went wrong!",e),eo({variant:"destructive",title:"Error al generar imagen",description:"No se pudo crear la imagen del resumen."})})},className:"w-full sm:w-auto bg-sky-600 hover:bg-sky-700 text-white",children:[(0,t.jsx)(q.A,{className:"mr-2 h-4 w-4"}),"Descargar JPG"]}),(0,t.jsx)(d,{type:"button",variant:"secondary",onClick:()=>z(!1),children:"Cerrar"})]})]})]})]})})]}),(0,t.jsxs)(c,{className:"bg-slate-800 border-slate-700",children:[(0,t.jsxs)(m,{children:[(0,t.jsxs)(p,{className:"flex items-center gap-2 text-sky-400",children:[(0,t.jsx)(O.A,{})," Lista de Espera (",ec.length,")"]}),(0,t.jsx)(u,{className:"text-slate-400",children:"Los jugadores se a\xf1aden a los equipos desde aqu\xed."})]}),(0,t.jsx)(x,{className:"space-y-2 max-h-[400px] overflow-y-auto",children:ec.length>0?ec.map((e,a)=>(0,t.jsx)(ei,{player:e,turn:a+1,onRemove:eu,onAssign:ex,showAssign:!0,onMoveUp:eg,onMoveDown:ey,isFirst:0===a,isLast:a===ec.length-1,isTeamAFull:h.players.length>=5,isTeamBFull:N.players.length>=5},e.id)):(0,t.jsx)("p",{className:"text-slate-500 text-center py-4",children:"No hay jugadores en espera."})})]}),(0,t.jsx)(c,{className:(0,n.cn)("border-slate-700 transition-all",A?"bg-gradient-to-br from-amber-500 to-yellow-400":"bg-slate-800"),children:A?(0,t.jsxs)("div",{className:"p-6 text-white",children:[(0,t.jsxs)("h2",{className:"text-3xl flex items-center justify-center gap-3 font-bold text-center",children:[(0,t.jsx)(_.A,{className:"h-8 w-8"}),"Campe\xf3n Descansando",(0,t.jsx)(_.A,{className:"h-8 w-8"})]}),(0,t.jsxs)("p",{className:"mt-2 text-amber-100 font-semibold text-center",children:["Racha Actual: ",A.players[0].consecutiveWins," victorias"]}),(0,t.jsx)("p",{className:"mt-1 text-sm text-amber-200/90 text-center",children:"Esperando al ganador del partido interino para volver a entrar."}),(0,t.jsx)("div",{className:"mt-4 space-y-2",children:A.players.map(e=>(0,t.jsx)(ei,{player:e,onRemove:eh,isChampion:!0},e.id))}),(0,t.jsx)(d,{className:"w-full mt-6 bg-indigo-600 hover:bg-indigo-700 text-white border-none",onClick:()=>{A&&(o(e=>[...e,...A.players.map(e=>e.id)]),E(null))},children:"Devolver a la Lista de Espera"})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(m,{children:(0,t.jsxs)(p,{className:"flex items-center gap-2 text-sky-400",children:[(0,t.jsx)(D.A,{})," Regla del Campe\xf3n"]})}),(0,t.jsxs)(x,{children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,t.jsx)(j,{id:"champion-rule",checked:P,disabled:!0}),(0,t.jsx)(y,{htmlFor:"champion-rule",children:"Regla activada autom\xe1ticamente"})]}),(0,t.jsx)("p",{className:"text-xs mb-4 text-slate-400",children:"Se activa con 10 o m\xe1s jugadores en espera."}),(0,t.jsxs)("div",{className:"flex items-center gap-2 my-4",children:[(0,t.jsx)(y,{htmlFor:"wins-to-champion",children:"Victorias para ser campe\xf3n:"}),(0,t.jsx)(f,{id:"wins-to-champion",type:"number",value:U,onChange:e=>X(Math.max(1,Number(e.target.value))),className:"w-20 bg-slate-700 border-slate-600 text-white",min:"1"})]}),(0,t.jsx)(b,{className:"bg-slate-700"}),(0,t.jsx)("p",{className:"text-center py-4 text-slate-500 mt-2",children:"No hay un equipo campe\xf3n descansando."})]})]})})]}),(0,t.jsx)("div",{className:"lg:col-span-2 space-y-8",children:(0,t.jsxs)(c,{className:"bg-slate-800/50 border-slate-700",children:[(0,t.jsxs)(m,{children:[(0,t.jsx)(p,{className:"text-3xl text-sky-400",children:A?"Partido Interino":"Equipos Actuales"}),A&&(0,t.jsxs)(u,{className:"text-yellow-400",children:["El ganador de este partido se enfrentar\xe1 al campe\xf3n: ",A.name]})]}),(0,t.jsxs)(x,{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex flex-col md:flex-row gap-6",children:[(0,t.jsx)(en,{team:h,onRemovePlayer:ef}),(0,t.jsx)(en,{team:N,onRemovePlayer:ef})]}),(0,t.jsx)(b,{className:"bg-slate-700"}),(0,t.jsxs)("div",{className:"text-center space-y-4",children:[(0,t.jsx)("h3",{className:"text-2xl text-sky-400",children:"Registrar Resultado del Partido"}),(0,t.jsxs)("div",{className:"flex justify-center gap-4",children:[(0,t.jsxs)(d,{size:"lg",className:"bg-emerald-600 hover:bg-emerald-700 text-white border-none",onClick:()=>eN("A"),disabled:h.players.length<5||N.players.length<5,children:[(0,t.jsx)(_.A,{className:"mr-2 h-4 w-4"})," Gan\xf3 ",h.name]}),(0,t.jsxs)(d,{size:"lg",className:"bg-emerald-600 hover:bg-emerald-700 text-white border-none",onClick:()=>eN("B"),disabled:h.players.length<5||N.players.length<5,children:[(0,t.jsx)(_.A,{className:"mr-2 h-4 w-4"})," Gan\xf3 ",N.name]})]})]})]})]})})]})]})}):(0,t.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 to-slate-800 text-slate-100 p-4 md:p-8 flex items-center justify-center",children:(0,t.jsx)("div",{className:"text-center",children:(0,t.jsx)("h1",{className:"font-bold text-5xl md:text-6xl text-sky-400",children:"Cargando..."})})})}},4160:(e,a,s)=>{Promise.resolve().then(s.bind(s,3306))},7481:(e,a,s)=>{"use strict";s.d(a,{dj:()=>p});var t=s(2115);let l=0,r=new Map,i=e=>{if(r.has(e))return;let a=setTimeout(()=>{r.delete(e),c({type:"REMOVE_TOAST",toastId:e})},1e6);r.set(e,a)},n=(e,a)=>{switch(a.type){case"ADD_TOAST":return{...e,toasts:[a.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===a.toast.id?{...e,...a.toast}:e)};case"DISMISS_TOAST":{let{toastId:s}=a;return s?i(s):e.toasts.forEach(e=>{i(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===a.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==a.toastId)}}},o=[],d={toasts:[]};function c(e){d=n(d,e),o.forEach(e=>{e(d)})}function m(e){let{...a}=e,s=(l=(l+1)%Number.MAX_SAFE_INTEGER).toString(),t=()=>c({type:"DISMISS_TOAST",toastId:s});return c({type:"ADD_TOAST",toast:{...a,id:s,open:!0,onOpenChange:e=>{e||t()}}}),{id:s,dismiss:t,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:s}})}}function p(){let[e,a]=t.useState(d);return t.useEffect(()=>(o.push(a),()=>{let e=o.indexOf(a);e>-1&&o.splice(e,1)}),[e]),{...e,toast:m,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}},9434:(e,a,s)=>{"use strict";s.d(a,{cn:()=>r});var t=s(2596),l=s(9688);function r(){for(var e=arguments.length,a=Array(e),s=0;s<e;s++)a[s]=arguments[s];return(0,l.QP)((0,t.$)(a))}}},e=>{var a=a=>e(e.s=a);e.O(0,[802,618,441,721,358],()=>a(4160)),_N_E=e.O()}]);